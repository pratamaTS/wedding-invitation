var Hl=Object.defineProperty,ql=Object.defineProperties;var zl=Object.getOwnPropertyDescriptors;var ui=Object.getOwnPropertySymbols;var Kl=Object.prototype.hasOwnProperty,Gl=Object.prototype.propertyIsEnumerable;var ci=(t,e,n)=>e in t?Hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hi=(t,e)=>{for(var n in e||(e={}))Kl.call(e,n)&&ci(t,n,e[n]);if(ui)for(var n of ui(e))Gl.call(e,n)&&ci(t,n,e[n]);return t},di=(t,e)=>ql(t,zl(e));import{_ as tn,u as Wl,r as j,o as Xn,a as E,c as k,b as f,n as pt,p as Qn,d as Yn,e as Xl,f as Ql,t as V,g as Ft,h as Yl,i as fi,j as y,w as st,k as mt,F as Ke,l as gt,m as ye,q as Jl,s as fs,v as ge,x as Dn,y as Nt,z as De,A as wo,B as Zl,C as eu,D as tu}from"./index.c149c76e.js";var nu="/assets/Vancouver Sleep Clinic - Someone to Stay (Audio).a42551ce.mp3";const ru=t=>(Qn("data-v-2fc3ddd2"),t=t(),Yn(),t),su={class:"fixed bottom-24 pl-2"},iu=ru(()=>f("i",{class:"fa-solid fa-gift"},null,-1)),ou=[iu],au={setup(t){Wl();const e=j("fa-solid fa-volume-high"),n=j(!0),r=new Audio(nu),s=0,i=255,o=()=>{n.value?(r.pause(),e.value="fa-solid fa-volume-off"):(r.currentTime=s,r.play(),e.value="fa-solid fa-volume-high"),n.value=!n.value};return r.addEventListener("timeupdate",()=>{r.currentTime>=i&&(r.currentTime=s,r.play())}),Xn(()=>{r.currentTime=s,r.play(),e.value="fa-solid fa-volume-high"}),(a,l)=>(E(),k("section",su,[f("button",{onClick:o,class:"button"},[f("i",{class:pt(e.value)},null,2)]),f("button",{onClick:l[0]||(l[0]=(...c)=>a.giftAction&&a.giftAction(...c)),class:"button"},ou)]))}};var lu=tn(au,[["__scopeId","data-v-2fc3ddd2"]]),Jn="/assets/flores.02d10ca5.png",uu="/assets/prewedding-couple.004ef60e.jpg";const nn=t=>(Qn("data-v-1ed4f7e2"),t=t(),Yn(),t),cu={class:"absolute inset-0 flex items-center justify-center"},hu={class:"overlay-box p-8 text-center rounded-lg"},du=nn(()=>f("h2",{class:"text-lg font-bold"},"Pernikahan",-1)),fu={class:"tangerine-font text-title font-bold"},pu=nn(()=>f("p",{class:"font-medium text-lg my-2",style:{color:"gray"}},"#aYOGAsforeverwithNANDA",-1)),mu=nn(()=>f("div",{class:"my-4"},[f("img",{src:Jn,class:"w-12 sm:w-16 mx-auto"})],-1)),gu={class:"text-sm"},yu=nn(()=>f("p",{class:"font-medium"},"Kepada Bapak/Ibu Yang Terhormat",-1)),vu={class:"font-medium text-lg my-2"},wu=nn(()=>f("p",{class:"font-medium my-2"},"Izinkan kami turut mengundang anda dalam acara kami",-1)),bu={setup(t){const e=["Youga","Nanda"],n=Xl();let r=Ql(()=>n.query);return n.query.first===void 0&&(r={first:""}),(s,i)=>(E(),k("section",{class:"w-full h-screen relative bg-cover bg-center",style:Yl({backgroundImage:`url(${Ft(uu)})`})},[f("section",cu,[f("div",hu,[du,f("h1",fu,V(e.join(" & ")),1),pu,mu,f("div",gu,[yu,f("p",vu,"Saudara/i "+V(Ft(r).first),1),wu])])])],4))}};var Eu=tn(bu,[["__scopeId","data-v-1ed4f7e2"]]),bo="/assets/couples.0af6e0f8.jpg";const Tu=f("img",{src:Jn,class:"w-6/12 md:w-6/12 mx-auto"},null,-1),Su={class:"satisfy-font text-4xl font-medium mb-5"},Au=["innerHTML"],yt={props:{title:{type:String,default:"The Section"},subtitle:{type:String,default:"Duis splople autem vel eum iriure Dapibus sit amet, tincidunt eu, nibh."},textColor:{type:String,default:"text-slate-800"}},setup(t){const e=t;return(n,r)=>(E(),k("section",{"data-aos":"fade-up",class:pt([e.textColor,"sm:w-full w-9/12 px-4 mb-6 text-center flex justify-center flex-col items-center ml-auto mr-auto"])},[Tu,f("h1",Su,V(e.title),1),f("p",{class:"text-sm",innerHTML:t.subtitle},null,8,Au)],2))}},Cu={"data-aos":"fade-up"},Iu={"data-aos":"fade-up"},Eo={props:{bgColor:{type:String,default:"bg-gray-50"}},setup(t){const e=t;return(n,r)=>(E(),k("section",{"data-aos":"zoom-in",class:pt([e.bgColor,"w-9/12 mx-auto rounded-tl-[2rem] rounded-br-[2rem] shadow-xl overflow-hidden border border-gray-200"])},[f("div",Cu,[fi(n.$slots,"body")]),f("div",Iu,[fi(n.$slots,"footer")])],2))}},_u={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},ku=f("path",{d:"m0 224 80-10.7c80-10.3 240-32.3 400-42.6C640 160 800 160 960 181.3c160 21.7 320 63.7 400 85.4l80 21.3V0H0Z"},null,-1),Du=[ku];function xu(t,e){return E(),k("svg",_u,Du)}var Nu={render:xu};const Ru={class:"w-full mb-12"},Ou={class:"container-section"},$u=f("p",{class:"text-sm p-6 text-justify",style:{color:"black"}},[mt(" In faucibus orci luctus et ultrices posuere cubilia Curae; Vestibulum hendrerit malesuada odio. Fusce ut elit ut augue sollicitudin blandit. Phasellus volutpat lorem. Duis non pede et neque luctus tincidunt. Duis interdum tempus elit. Aenean metus. Vestibulum ac lacus. Vivamus porttitor, massa ut hendrerit bibendum, metus. "),f("br"),f("br")],-1),Pu=f("img",{src:bo,class:"w-full",alt:""},null,-1),Mu={setup(t){return(e,n)=>(E(),k("section",Ru,[y(Ft(Nu),{class:"fill-gray-800"}),f("section",Ou,[y(yt,{title:"Pandangan Pertama"}),y(Eo,{title:"Kisah kami berawal dari"},{body:st(()=>[$u]),footer:st(()=>[Pu]),_:1})])]))}};var ps={exports:{}},To=function(e,n){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(n,s)}},Lu=To,ms=Object.prototype.toString,gs=function(t){return function(e){var n=ms.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function Ge(t){return t=t.toLowerCase(),function(n){return gs(n)===t}}function ys(t){return Array.isArray(t)}function xn(t){return typeof t=="undefined"}function Fu(t){return t!==null&&!xn(t)&&t.constructor!==null&&!xn(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var So=Ge("ArrayBuffer");function Bu(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&So(t.buffer),e}function Vu(t){return typeof t=="string"}function Uu(t){return typeof t=="number"}function Ao(t){return t!==null&&typeof t=="object"}function Cn(t){if(gs(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var ju=Ge("Date"),Hu=Ge("File"),qu=Ge("Blob"),zu=Ge("FileList");function vs(t){return ms.call(t)==="[object Function]"}function Ku(t){return Ao(t)&&vs(t.pipe)}function Gu(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||ms.call(t)===e||vs(t.toString)&&t.toString()===e)}var Wu=Ge("URLSearchParams");function Xu(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Qu(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function ws(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),ys(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function Hr(){var t={};function e(s,i){Cn(t[i])&&Cn(s)?t[i]=Hr(t[i],s):Cn(s)?t[i]=Hr({},s):ys(s)?t[i]=s.slice():t[i]=s}for(var n=0,r=arguments.length;n<r;n++)ws(arguments[n],e);return t}function Yu(t,e,n){return ws(e,function(s,i){n&&typeof s=="function"?t[i]=Lu(s,n):t[i]=s}),t}function Ju(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Zu(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function ec(t,e,n){var r,s,i,o={};e=e||{};do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)i=r[s],o[i]||(e[i]=t[i],o[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function tc(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return r!==-1&&r===n}function nc(t){if(!t)return null;var e=t.length;if(xn(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var rc=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),Y={isArray:ys,isArrayBuffer:So,isBuffer:Fu,isFormData:Gu,isArrayBufferView:Bu,isString:Vu,isNumber:Uu,isObject:Ao,isPlainObject:Cn,isUndefined:xn,isDate:ju,isFile:Hu,isBlob:qu,isFunction:vs,isStream:Ku,isURLSearchParams:Wu,isStandardBrowserEnv:Qu,forEach:ws,merge:Hr,extend:Yu,trim:Xu,stripBOM:Ju,inherits:Zu,toFlatObject:ec,kindOf:gs,kindOfTest:Ge,endsWith:tc,toArray:nc,isTypedArray:rc,isFileList:zu},Ye=Y;function pi(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Co=function(e,n,r){if(!n)return e;var s;if(r)s=r(n);else if(Ye.isURLSearchParams(n))s=n.toString();else{var i=[];Ye.forEach(n,function(l,c){l===null||typeof l=="undefined"||(Ye.isArray(l)?c=c+"[]":l=[l],Ye.forEach(l,function(h){Ye.isDate(h)?h=h.toISOString():Ye.isObject(h)&&(h=JSON.stringify(h)),i.push(pi(c)+"="+pi(h))}))}),s=i.join("&")}if(s){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},sc=Y;function Zn(){this.handlers=[]}Zn.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Zn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Zn.prototype.forEach=function(e){sc.forEach(this.handlers,function(r){r!==null&&e(r)})};var ic=Zn,oc=Y,ac=function(e,n){oc.forEach(e,function(s,i){i!==n&&i.toUpperCase()===n.toUpperCase()&&(e[n]=s,delete e[i])})},Io=Y;function it(t,e,n,r,s){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}Io.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var _o=it.prototype,ko={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){ko[t]={value:t}});Object.defineProperties(it,ko);Object.defineProperty(_o,"isAxiosError",{value:!0});it.from=function(t,e,n,r,s,i){var o=Object.create(_o);return Io.toFlatObject(t,o,function(l){return l!==Error.prototype}),it.call(o,t.message,e,n,r,s),o.name=t.name,i&&Object.assign(o,i),o};var vt=it,Do={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fe=Y;function lc(t,e){e=e||new FormData;var n=[];function r(i){return i===null?"":fe.isDate(i)?i.toISOString():fe.isArrayBuffer(i)||fe.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function s(i,o){if(fe.isPlainObject(i)||fe.isArray(i)){if(n.indexOf(i)!==-1)throw Error("Circular reference detected in "+o);n.push(i),fe.forEach(i,function(l,c){if(!fe.isUndefined(l)){var u=o?o+"."+c:c,h;if(l&&!o&&typeof l=="object"){if(fe.endsWith(c,"{}"))l=JSON.stringify(l);else if(fe.endsWith(c,"[]")&&(h=fe.toArray(l))){h.forEach(function(m){!fe.isUndefined(m)&&e.append(u,r(m))});return}}s(l,u)}}),n.pop()}else e.append(o,r(i))}return s(t),e}var xo=lc,Cr=vt,uc=function(e,n,r){var s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):n(new Cr("Request failed with status code "+r.status,[Cr.ERR_BAD_REQUEST,Cr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},yn=Y,cc=yn.isStandardBrowserEnv()?function(){return{write:function(n,r,s,i,o,a){var l=[];l.push(n+"="+encodeURIComponent(r)),yn.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),yn.isString(i)&&l.push("path="+i),yn.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),hc=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},dc=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},fc=hc,pc=dc,No=function(e,n){return e&&!fc(n)?pc(e,n):n},Ir=Y,mc=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],gc=function(e){var n={},r,s,i;return e&&Ir.forEach(e.split(`
`),function(a){if(i=a.indexOf(":"),r=Ir.trim(a.substr(0,i)).toLowerCase(),s=Ir.trim(a.substr(i+1)),r){if(n[r]&&mc.indexOf(r)>=0)return;r==="set-cookie"?n[r]=(n[r]?n[r]:[]).concat([s]):n[r]=n[r]?n[r]+", "+s:s}}),n},mi=Y,yc=mi.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function s(i){var o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){var a=mi.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),qr=vt,vc=Y;function Ro(t){qr.call(this,t==null?"canceled":t,qr.ERR_CANCELED),this.name="CanceledError"}vc.inherits(Ro,qr,{__CANCEL__:!0});var er=Ro,wc=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""},kt=Y,bc=uc,Ec=cc,Tc=Co,Sc=No,Ac=gc,Cc=yc,Ic=Do,be=vt,_c=er,kc=wc,gi=function(e){return new Promise(function(r,s){var i=e.data,o=e.headers,a=e.responseType,l;function c(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}kt.isFormData(i)&&kt.isStandardBrowserEnv()&&delete o["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(h+":"+m)}var v=Sc(e.baseURL,e.url);u.open(e.method.toUpperCase(),Tc(v,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function A(){if(!!u){var I="getAllResponseHeaders"in u?Ac(u.getAllResponseHeaders()):null,P=!a||a==="text"||a==="json"?u.responseText:u.response,me={data:P,status:u.status,statusText:u.statusText,headers:I,config:e,request:u};bc(function(Qe){r(Qe),c()},function(Qe){s(Qe),c()},me),u=null}}if("onloadend"in u?u.onloadend=A:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(A)},u.onabort=function(){!u||(s(new be("Request aborted",be.ECONNABORTED,e,u)),u=null)},u.onerror=function(){s(new be("Network Error",be.ERR_NETWORK,e,u,u)),u=null},u.ontimeout=function(){var P=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",me=e.transitional||Ic;e.timeoutErrorMessage&&(P=e.timeoutErrorMessage),s(new be(P,me.clarifyTimeoutError?be.ETIMEDOUT:be.ECONNABORTED,e,u)),u=null},kt.isStandardBrowserEnv()){var x=(e.withCredentials||Cc(v))&&e.xsrfCookieName?Ec.read(e.xsrfCookieName):void 0;x&&(o[e.xsrfHeaderName]=x)}"setRequestHeader"in u&&kt.forEach(o,function(P,me){typeof i=="undefined"&&me.toLowerCase()==="content-type"?delete o[me]:u.setRequestHeader(me,P)}),kt.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(I){!u||(s(!I||I&&I.type?new _c:I),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),i||(i=null);var C=kc(v);if(C&&["http","https","file"].indexOf(C)===-1){s(new be("Unsupported protocol "+C+":",be.ERR_BAD_REQUEST,e));return}u.send(i)})},Dc=null,H=Y,yi=ac,vi=vt,xc=Do,Nc=xo,Rc={"Content-Type":"application/x-www-form-urlencoded"};function wi(t,e){!H.isUndefined(t)&&H.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Oc(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=gi),t}function $c(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var tr={transitional:xc,adapter:Oc(),transformRequest:[function(e,n){if(yi(n,"Accept"),yi(n,"Content-Type"),H.isFormData(e)||H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return wi(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=H.isObject(e),s=n&&n["Content-Type"],i;if((i=H.isFileList(e))||r&&s==="multipart/form-data"){var o=this.env&&this.env.FormData;return Nc(i?{"files[]":e}:e,o&&new o)}else if(r||s==="application/json")return wi(n,"application/json"),$c(e);return e}],transformResponse:[function(e){var n=this.transitional||tr.transitional,r=n&&n.silentJSONParsing,s=n&&n.forcedJSONParsing,i=!r&&this.responseType==="json";if(i||s&&H.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?vi.from(o,vi.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dc},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};H.forEach(["delete","get","head"],function(e){tr.headers[e]={}});H.forEach(["post","put","patch"],function(e){tr.headers[e]=H.merge(Rc)});var bs=tr,Pc=Y,Mc=bs,Lc=function(e,n,r){var s=this||Mc;return Pc.forEach(r,function(o){e=o.call(s,e,n)}),e},Oo=function(e){return!!(e&&e.__CANCEL__)},bi=Y,_r=Lc,Fc=Oo,Bc=bs,Vc=er;function kr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Vc}var Uc=function(e){kr(e),e.headers=e.headers||{},e.data=_r.call(e,e.data,e.headers,e.transformRequest),e.headers=bi.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),bi.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var n=e.adapter||Bc.adapter;return n(e).then(function(s){return kr(e),s.data=_r.call(e,s.data,s.headers,e.transformResponse),s},function(s){return Fc(s)||(kr(e),s&&s.response&&(s.response.data=_r.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},ce=Y,$o=function(e,n){n=n||{};var r={};function s(u,h){return ce.isPlainObject(u)&&ce.isPlainObject(h)?ce.merge(u,h):ce.isPlainObject(h)?ce.merge({},h):ce.isArray(h)?h.slice():h}function i(u){if(ce.isUndefined(n[u])){if(!ce.isUndefined(e[u]))return s(void 0,e[u])}else return s(e[u],n[u])}function o(u){if(!ce.isUndefined(n[u]))return s(void 0,n[u])}function a(u){if(ce.isUndefined(n[u])){if(!ce.isUndefined(e[u]))return s(void 0,e[u])}else return s(void 0,n[u])}function l(u){if(u in n)return s(e[u],n[u]);if(u in e)return s(void 0,e[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return ce.forEach(Object.keys(e).concat(Object.keys(n)),function(h){var m=c[h]||i,v=m(h);ce.isUndefined(v)&&m!==l||(r[h]=v)}),r},Po={version:"0.27.2"},jc=Po.version,Ie=vt,Es={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Es[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var Ei={};Es.transitional=function(e,n,r){function s(i,o){return"[Axios v"+jc+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return function(i,o,a){if(e===!1)throw new Ie(s(o," has been removed"+(n?" in "+n:"")),Ie.ERR_DEPRECATED);return n&&!Ei[o]&&(Ei[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function Hc(t,e,n){if(typeof t!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),s=r.length;s-- >0;){var i=r[s],o=e[i];if(o){var a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Ie("option "+i+" must be "+l,Ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ie("Unknown option "+i,Ie.ERR_BAD_OPTION)}}var qc={assertOptions:Hc,validators:Es},Mo=Y,zc=Co,Ti=ic,Si=Uc,nr=$o,Kc=No,Lo=qc,Je=Lo.validators;function ot(t){this.defaults=t,this.interceptors={request:new Ti,response:new Ti}}ot.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=nr(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&Lo.assertOptions(r,{silentJSONParsing:Je.transitional(Je.boolean),forcedJSONParsing:Je.transitional(Je.boolean),clarifyTimeoutError:Je.transitional(Je.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(i=i&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});var o=[];this.interceptors.response.forEach(function(v){o.push(v.fulfilled,v.rejected)});var a;if(!i){var l=[Si,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(o),a=Promise.resolve(n);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=n;s.length;){var u=s.shift(),h=s.shift();try{c=u(c)}catch(m){h(m);break}}try{a=Si(c)}catch(m){return Promise.reject(m)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};ot.prototype.getUri=function(e){e=nr(this.defaults,e);var n=Kc(e.baseURL,e.url);return zc(n,e.params,e.paramsSerializer)};Mo.forEach(["delete","get","head","options"],function(e){ot.prototype[e]=function(n,r){return this.request(nr(r||{},{method:e,url:n,data:(r||{}).data}))}});Mo.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(nr(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ot.prototype[e]=n(),ot.prototype[e+"Form"]=n(!0)});var Gc=ot,Wc=er;function at(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(s){e=s});var n=this;this.promise.then(function(r){if(!!n._listeners){var s,i=n._listeners.length;for(s=0;s<i;s++)n._listeners[s](r);n._listeners=null}}),this.promise.then=function(r){var s,i=new Promise(function(o){n.subscribe(o),s=o}).then(r);return i.cancel=function(){n.unsubscribe(s)},i},t(function(s){n.reason||(n.reason=new Wc(s),e(n.reason))})}at.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};at.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};at.prototype.unsubscribe=function(e){if(!!this._listeners){var n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}};at.source=function(){var e,n=new at(function(s){e=s});return{token:n,cancel:e}};var Xc=at,Qc=function(e){return function(r){return e.apply(null,r)}},Yc=Y,Jc=function(e){return Yc.isObject(e)&&e.isAxiosError===!0},Ai=Y,Zc=To,In=Gc,eh=$o,th=bs;function Fo(t){var e=new In(t),n=Zc(In.prototype.request,e);return Ai.extend(n,In.prototype,e),Ai.extend(n,e),n.create=function(s){return Fo(eh(t,s))},n}var le=Fo(th);le.Axios=In;le.CanceledError=er;le.CancelToken=Xc;le.isCancel=Oo;le.VERSION=Po.version;le.toFormData=xo;le.AxiosError=vt;le.Cancel=le.CanceledError;le.all=function(e){return Promise.all(e)};le.spread=Qc;le.isAxiosError=Jc;ps.exports=le;ps.exports.default=le;var Ts=ps.exports;const nh={class:"w-full mb-6","data-aos":"slide-up"},rh=["src","alt"],sh={class:"mt-10 w-full text-center text-slate-800 text-sm"},ih={class:"text-black text-[2rem] font-semibold tangerine-font"},oh={class:"text-black mb-3 mt-1 font-semibold"},ah={class:"flex gap-3 justify-center mt-3"},lh=["href"],uh={props:{source:{type:Object,default:{name:"fulan"}}},setup(t){return(e,n)=>(E(),k("section",nh,[f("img",{class:"w-9/12 shadow-lg border border-gray-200 mx-auto rounded-tr-3xl rounded-bl-3xl",src:t.source.thumb,alt:t.source.thumb},null,8,rh),f("div",sh,[f("p",ih,V(t.source.name),1),f("p",oh,V(t.source.description),1),f("div",ah,[(E(!0),k(Ke,null,gt(t.source.social,(r,s)=>(E(),k("a",{key:s,target:"_blank",class:"text-amber-500",href:r.link},[f("i",{class:pt([r.icon,"text-xl"])},null,2)],8,lh))),128))])])]))}},ch={class:"w-10/12 mx-auto flex flex-wrap justify-center items-center gap-5 mt-6"},hh={setup(t){const e=j(null);return Xn(()=>{Ts.get("contents/couples.json").then(n=>e.value=n.data.couples).catch(n=>alert(n))}),(n,r)=>(E(),k("section",ch,[(E(!0),k(Ke,null,gt(e.value,(s,i)=>(E(),ye(uh,{key:i,source:s},null,8,["source"]))),128))]))}},dh={class:"px-2 py-4"},fh=f("p",{class:"mx-auto text-center text-sm text-black w-10/12 mb-2"},"Menuju acara kami",-1),ph={class:"flex justify-center gap-3"},mh={class:"text-3xl font-medium text-amber-500 mb-2"},gh={class:"text-black text-sm font-medium"},yh={setup(t){const e=j(null),n=(s,i,o)=>{const a=new Date().getTime(),l=s-a;if(l>0){const c=Math.floor(l/864e5),u=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),h=Math.floor(l%(1e3*60*60)/(1e3*60)),m=Math.floor(l%(1e3*60)/1e3);i.value={days:c,hours:u,minutes:h,seconds:m},c===0&&u===0&&h===0&&m===0&&o()}else i.value={days:0,hours:0,minutes:0,seconds:0}},r=setInterval(()=>{n(new Date("2024-11-10 08:30").getTime(),e,()=>{clearInterval(r)})},1e3);return(s,i)=>(E(),k("div",dh,[fh,f("section",ph,[(E(!0),k(Ke,null,gt(e.value,(o,a,l)=>(E(),k("div",{key:l,"data-aos":"zoom-in",class:"text-center w-3/12"},[f("p",mh,V(o),1),f("p",gh,V(a),1)]))),128))])]))}};const wt=t=>(Qn("data-v-fd2e874a"),t=t(),Yn(),t),vh={class:"w-full bg-cream"},wh={class:"container-section pb-12"},bh={"data-aos":"fade-up"},Eh={class:"text-xl satisfy-font text-amber-400"},Th={class:"font-medium text-black"},Sh={class:"font-medium text-black"},Ah=wt(()=>f("img",{src:Jn,class:"w-4/12 md:w-4/12 mx-auto rotate-180"},null,-1)),Ch={class:"text-amber-500"},Ih={class:"text-black"},_h=["href"],kh=wt(()=>f("i",{class:"fa-solid fa-map"},null,-1)),Dh=mt(" Lihat Peta "),xh=[kh,Dh],Nh=wt(()=>f("img",{src:Jn,class:"w-4/12 md:w-4/12 mx-auto"},null,-1)),Rh={class:""},Oh=wt(()=>f("p",{class:"text-sm text-black"},"Konfirmasi kehadiran anda pada buku tamu",-1)),$h=wt(()=>f("i",{class:"fa-solid fa-clipboard-check"},null,-1)),Ph=mt(" Konfirmasi "),Mh=[$h,Ph],Lh=wt(()=>f("img",{src:bo,alt:""},null,-1)),Fh={emits:["goToGuestBook"],setup(t,{emit:e}){const n=j(null);Xn(()=>{Ts.get("contents/timelines.json").then(s=>n.value=s.data.timelines).catch(s=>alert(s))});const r=()=>setTimeout(()=>{e("goToGuestBook")},300);return(s,i)=>(E(),k("section",vh,[f("section",wh,[y(yt,{"text-color":"text-black",subtitle:"Dengan tidak mengurangi rasa hormat, kami mengajak para tamu undangan agar bisa berhadir pada serangkaian acara kami",title:"Runtutan Acara"}),y(Eo,null,{body:st(()=>[(E(!0),k(Ke,null,gt(n.value,(o,a)=>(E(),k("div",{class:"px-6 py-8 text-center text-sm font-medium",key:a},[f("section",bh,[f("h1",Eh,V(o.title),1),f("p",Th,V(o.date),1),f("p",Sh,V(o.time),1),Ah,f("p",Ch,V(o.location),1),f("p",Ih,V(o.address),1),f("a",{class:"btn bg-gray-800 text-amber-500",href:o.mapUrl,target:"_blank"},xh,8,_h),Nh])]))),128))]),footer:st(()=>[f("section",Rh,[y(yh),f("div",{class:"px-6 pt-5 pb-8 text-center"},[Oh,f("button",{onClick:r,class:"btn bg-gray-800 text-amber-500"},Mh)]),Lh])]),_:1})])]))}};var Bh=tn(Fh,[["__scopeId","data-v-fd2e874a"]]);const Vh={class:"w-full bg-cream"},Uh={class:"container-section"},jh={setup(t){return(e,n)=>(E(),k("section",Vh,[f("section",Uh,[y(yt,{"text-color":"text-black",title:"Mempelai Pria dan Wanita",subtitle:"Ya Allah dengan mengharap ridha dan karunia-Mu, Izinkanlah kami mempersatukan dua insan dari dua keluarga ini agar menjadi pasangan yang selalu mendapakan rahmat-Mu"}),y(hh)])]))}};const Hh={class:"w-full xl:bg-slate-100"},qh={class:"w-full px-0"},zh={class:"flex flex-wrap"},Kh={"data-aos":"fade-up",class:"w-full"},Gh=["src"],Wh=["src","alt"],Xh={key:1,class:"text-center"},Qh={setup(t){const e=j(null);return Xn(()=>{Ts.get("contents/galleries.json").then(n=>{e.value=n.data.galleries}).catch(n=>{console.error(n),alert("Failed to load gallery images.")})}),(n,r)=>{const s=Jl("viewer");return E(),k("section",Hh,[f("section",qh,[e.value&&e.value.length>0?(E(),ye(s,{key:0,images:e.value},{default:st(()=>[f("div",zh,[f("div",Kh,[f("img",{src:e.value[0],class:"w-full h-auto",alt:"Landscape Photo"},null,8,Gh)]),(E(!0),k(Ke,null,gt(e.value.slice(1),(i,o)=>(E(),k("div",{key:o,"data-aos":"fade-up",class:"w-4/12"},[f("img",{src:i,class:"w-full h-auto",alt:`Portrait Photo ${o+1}`},null,8,Wh)]))),128))])]),_:1},8,["images"])):(E(),k("div",Xh," Loading images... "))])])}}};var Yh=tn(Qh,[["__scopeId","data-v-75fe364a"]]),Bo=fs({name:"BasicTheme",props:{uuid:{type:String,required:!0},src:{type:String,required:!0},autoplay:{type:Boolean,required:!0},loop:{type:Boolean,required:!0},controls:{type:Boolean,required:!0},hoverable:{type:Boolean,required:!0},mask:{type:Boolean,required:!0},colors:{type:[String,Array],required:!0},time:{type:Object,required:!0},playing:{type:Boolean,default:!1},duration:{type:[String,Number],required:!0}},data(){return{hovered:!1,volume:!1,amount:1}},computed:{colorFrom(){var t;return typeof this.colors=="string"?this.colors?this.colors:"#fbbf24":(t=this.colors)!==null&&t!==void 0&&t[0]?this.colors[0]:"#fbbf24"},colorTo(){var t;return typeof this.colors=="string"?this.colors?this.colors:"#fbbf24":(t=this.colors)!==null&&t!==void 0&&t[1]?this.colors[1]:"#ec4899"}},mounted(){this.$emit("setPlayer",this.$refs[this.uuid])},methods:{setVolume(){this.$refs[this.uuid].volume=this.amount},stopVolume(){return this.amount>0?this.amount=0:this.amount=1}}});const Jh={class:"relative"},Zh={class:"flex items-center justify-start w-full"},ed={class:"font-sans text-white text-xs w-24"},td={class:"mr-3 ml-2"},nd={class:"relative"},rd={class:"px-3 py-2 rounded-lg flex items-center transform translate-x-2",style:{"background-color":"rgba(0, 0, 0, .8)"}},sd=y("img",{src:"https://en-zo.dev/vue-videoplayer/play.svg",alt:"Icon play video",class:"transform translate-x-0.5 w-12"},null,-1);function id(t,e,n,r,s,i){return E(),ye("div",{class:"shadow-xl rounded-xl overflow-hidden relative",onMouseenter:e[15]||(e[15]=o=>t.hovered=!0),onMouseleave:e[16]||(e[16]=o=>t.hovered=!1),onKeydown:e[17]||(e[17]=wo(o=>t.$emit("play"),["left"]))},[y("div",Jh,[y("video",{ref:t.uuid,class:"w-full",loop:t.loop,autoplay:t.autoplay,muted:t.autoplay,onTimeupdate:e[1]||(e[1]=o=>t.$emit("timeupdate",o.target)),onPause:e[2]||(e[2]=o=>t.$emit("isPlaying",!1)),onPlay:e[3]||(e[3]=o=>t.$emit("isPlaying",!0)),onClick:e[4]||(e[4]=o=>t.$emit("play"))},[y("source",{src:t.src,type:"video/mp4"},null,8,["src"])],40,["loop","autoplay","muted"]),t.controls?(E(),ye("div",{key:0,class:[{"opacity-0 translate-y-full":!t.hoverable&&t.hovered,"opacity-0 translate-y-full":t.hoverable&&!t.hovered},"transition duration-300 transform absolute w-full bottom-0 left-0 flex items-center justify-between overlay px-5  pt-3 pb-5"]},[y("div",Zh,[y("p",ed,V(t.time.display)+"/"+V(t.duration),1),y("div",td,[ge(y("img",{src:"https://en-zo.dev/vue-videoplayer/pause.svg",alt:"Icon pause video",class:"w-5 cursor-pointer",onClick:e[5]||(e[5]=o=>t.$emit("play"))},null,512),[[Dn,t.playing]]),ge(y("img",{src:"https://en-zo.dev/vue-videoplayer/play.svg",alt:"Icon play video",class:"w-5 cursor-pointer",onClick:e[6]||(e[6]=o=>t.$emit("play"))},null,512),[[Dn,!t.playing]])]),y("div",{class:"w-full h-1 bg-white bg-opacity-60 rounded-sm cursor-pointer",onClick:e[7]||(e[7]=o=>t.$emit("position",o))},[y("div",{class:"relative h-full pointer-events-none",style:`width: ${t.time.progress}%; transition: width .2s ease-in-out;`},[y("div",{class:"w-full rounded-sm h-full gradient-variable bg-gradient-to-r pointer-events-none absolute top-0 left-0",style:`--tw-gradient-from: ${t.colorFrom};--tw-gradient-to: ${t.colorTo};transition: width .2s ease-in-out`},null,4),y("div",{class:"w-full rounded-sm filter blur-sm h-full gradient-variable bg-gradient-to-r pointer-events-none absolute top-0 left-0",style:`--tw-gradient-from: ${t.colorFrom};--tw-gradient-to: ${t.colorTo};transition: width .2s ease-in-out`},null,4)],4)])]),y("div",{class:"ml-5 flex items-center justify-end",onMouseleave:e[13]||(e[13]=o=>t.volume=!1)},[y("div",nd,[y("div",{class:`w-128 origin-left translate-x-2 -rotate-90 w-128 transition duration-200 absolute transform top-0 py-2 ${t.volume?"-translate-y-4":"opacity-0 -translate-y-1 pointer-events-none"}`},[y("div",rd,[ge(y("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.amount=o),type:"range",step:"0.05",min:"0",max:"1",class:"rounded-lg overflow-hidden appearance-none bg-white bg-opacity-30 h-1 w-128 vertical-range",onInput:e[9]||(e[9]=(...o)=>t.setVolume&&t.setVolume(...o))},null,544),[[Nt,t.amount]])])],2),y("img",{src:`https://en-zo.dev/vue-videoplayer/volume-${Math.ceil(t.amount*2)}.svg`,alt:"High volume video",class:"w-5 cursor-pointer relative",style:{"z-index":"2"},onClick:e[10]||(e[10]=(...o)=>t.stopVolume&&t.stopVolume(...o)),onMouseenter:e[11]||(e[11]=o=>t.volume=!0)},null,40,["src"])]),y("img",{src:"https://en-zo.dev/vue-videoplayer/maximize.svg",alt:"Fullscreen",class:"w-3 ml-4 cursor-pointer",onClick:e[12]||(e[12]=o=>t.$emit("fullScreen"))})],32)],2)):De("",!0),!t.autoplay&&t.mask&&t.time.current===0?(E(),ye("div",{key:1,class:`transition transform duration-300 absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 backdrop-filter z-10 flex items-center justify-center ${t.playing?"opacity-0 pointer-events-none":""}`},[y("div",{class:"w-20 h-20 rounded-full bg-white bg-opacity-20 transition duration-200 hover:bg-opacity-40 flex items-center justify-center cursor-pointer",onClick:e[14]||(e[14]=o=>t.$emit("play"))},[sd])],2)):De("",!0)])],32)}Bo.render=id;var Vo=fs({name:"BasicTheme",props:{uuid:{type:String,required:!0},src:{type:String,required:!0},autoplay:{type:Boolean,required:!0},loop:{type:Boolean,required:!0},controls:{type:Boolean,required:!0},hoverable:{type:Boolean,required:!0},mask:{type:Boolean,required:!0},colors:{type:[String,Array],required:!0},time:{type:Object,required:!0},playing:{type:Boolean,default:!1},duration:{type:[String,Number],required:!0}},data(){return{hovered:!1,volume:!1,amount:1}},computed:{color(){var t;return typeof this.colors=="string"?this.colors?this.colors:"#8B5CF6":(t=this.colors)!==null&&t!==void 0&&t[0]?this.colors[0]:"#8B5CF6"}},mounted(){this.$emit("setPlayer",this.$refs[this.uuid])},methods:{setVolume(){this.$refs[this.uuid].volume=this.amount},stopVolume(){return this.amount>0?this.amount=0:this.amount=1}}});const od={class:"relative"},ad={class:"mr-5"},ld={class:"relative mr-6"},ud={class:"px-3 py-3 rounded-xl flex items-center transform translate-x-9 bg-black bg-opacity-30"},cd=y("img",{src:"https://en-zo.dev/vue-videoplayer/play.svg",alt:"Icon play video",class:"transform translate-x-0.5 w-12"},null,-1);function hd(t,e,n,r,s,i){return E(),ye("div",{class:"shadow-xl rounded-3xl overflow-hidden relative",onMouseenter:e[14]||(e[14]=o=>t.hovered=!0),onMouseleave:e[15]||(e[15]=o=>t.hovered=!1),onKeydown:e[16]||(e[16]=wo(o=>t.$emit("play"),["left"]))},[y("div",od,[y("video",{ref:t.uuid,class:"w-full",loop:t.loop,autoplay:t.autoplay,muted:t.autoplay,onTimeupdate:e[1]||(e[1]=o=>t.$emit("timeupdate",o.target)),onPause:e[2]||(e[2]=o=>t.$emit("isPlaying",!1)),onPlay:e[3]||(e[3]=o=>t.$emit("isPlaying",!0)),onClick:e[4]||(e[4]=o=>t.$emit("play"))},[y("source",{src:t.src,type:"video/mp4"},null,8,["src"])],40,["loop","autoplay","muted"]),t.controls?(E(),ye("div",{key:0,class:[{"opacity-0 translate-y-full":!t.hoverable&&t.hovered,"opacity-0 translate-y-full":t.hoverable&&!t.hovered},"absolute px-5 pb-5 bottom-0 left-0 w-full transition duration-300 transform"]},[y("div",{class:"w-full bg-black bg-opacity-30 px-5 py-4 rounded-xl flex items-center justify-between",onMouseleave:e[12]||(e[12]=o=>t.volume=!1)},[y("div",{class:"font-sans py-1 px-2 text-white rounded-md text-xs mr-5 whitespace-nowrap font-medium w-32 text-center",style:`font-size: 11px; background-color: ${t.color}`},V(t.time.display)+"\xA0/\xA0"+V(t.duration),5),y("div",ad,[ge(y("img",{src:"https://en-zo.dev/vue-videoplayer/basic/pause.svg",alt:"Icon pause video",class:"w-4 cursor-pointer filter-white transition duration-300",onClick:e[5]||(e[5]=o=>t.$emit("play"))},null,512),[[Dn,t.playing]]),ge(y("img",{src:"https://en-zo.dev/vue-videoplayer/basic/play.svg",alt:"Icon play video",class:"w-4 cursor-pointer filter-white transition duration-300",onClick:e[6]||(e[6]=o=>t.$emit("play"))},null,512),[[Dn,!t.playing]])]),y("div",{class:"w-full h-1 bg-white bg-opacity-40 rounded-sm cursor-pointer mr-6",onClick:e[7]||(e[7]=o=>t.$emit("position",o))},[y("div",{class:"w-full rounded-sm h-full bg-white pointer-events-none",style:`width: ${t.time.progress}%; transition: width .2s ease-in-out;`},null,4)]),y("div",ld,[y("div",{class:`w-128 origin-left translate-x-2 -rotate-90 w-128 transition duration-200 absolute transform top-0 py-2 ${t.volume?"-translate-y-4":"opacity-0 -translate-y-1 pointer-events-none"}`},[y("div",ud,[ge(y("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.amount=o),type:"range",step:"0.05",min:"0",max:"1",class:"rounded-lg overflow-hidden appearance-none bg-white bg-opacity-30 h-1.5 w-128 vertical-range"},null,512),[[Nt,t.amount]])])],2),y("img",{src:`https://en-zo.dev/vue-videoplayer/basic/volume_${Math.ceil(t.amount*2)}.svg`,alt:"High volume video",class:"w-5 cursor-pointer filter-white transition duration-300 relative",style:{"z-index":"2"},onClick:e[9]||(e[9]=(...o)=>t.stopVolume&&t.stopVolume(...o)),onMouseenter:e[10]||(e[10]=o=>t.volume=!0)},null,40,["src"])]),y("img",{src:"https://en-zo.dev/vue-videoplayer/basic/fullscreen.svg",alt:"Fullscreen",class:"w-4 cursor-pointer filter-white transition duration-300",onClick:e[11]||(e[11]=o=>t.$emit("fullScreen"))})],32)],2)):De("",!0),!t.autoplay&&t.mask&&t.time.current===0?(E(),ye("div",{key:1,class:`transition transform duration-300 absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 backdrop-filter z-10 flex items-center justify-center ${t.playing?"opacity-0 pointer-events-none":""}`},[y("div",{class:"w-20 h-20 rounded-full bg-white bg-opacity-20 transition duration-200 hover:bg-opacity-40 flex items-center justify-center cursor-pointer",onClick:e[13]||(e[13]=o=>t.$emit("play"))},[cd])],2)):De("",!0)])],32)}Vo.render=hd;var Uo=fs({name:"Vue3PlayerVideo",components:{basic:Vo,gradient:Bo},props:{src:{type:String,required:!0},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},controls:{type:Boolean,default:!0},mask:{type:Boolean,default:!0},colors:{type:[String,Array],default(){return["#8B5CF6","#ec4899"]}},hoverable:{type:Boolean,default:!1},theme:{type:String,default:"basic"}},data(){return{uuid:Math.random().toString(36).substr(2,18),player:null,duration:0,playing:!1,time:{progress:0,display:0,current:0}}},created(){window.addEventListener("keyup",({keyCode:t})=>{t===32&&this.play()})},watch:{"time.current"(t){this.time.display=this.format(Number(t)),this.time.progress=t*100/this.player.duration}},methods:{isPlaying(t){this.playing=t},play(){return this.playing?this.player.pause():this.player.play()},setPlayer(t){this.player=t,this.player.addEventListener("loadeddata",()=>{this.player.readyState>=3&&(this.duration=this.format(Number(this.player.duration)),this.time.display=this.format(0))})},stop(){this.player.pause(),this.player.currentTime=0},fullScreen(){this.player.webkitEnterFullscreen()},position(t){this.player.pause();const e=t.target.getBoundingClientRect(),r=(t.clientX-e.left)*100/t.target.offsetWidth;this.player.currentTime=r*this.player.duration/100,this.player.play()},format(t){const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.round(t%60);return[e,n>9?n:e?"0"+n:n||"00",r>9?r:"0"+r].filter(Boolean).join(":")}}});const dd={class:"vue3-player-video"};function fd(t,e,n,r,s,i){return E(),ye("div",dd,[(E(),ye(Zl(t.theme),{uuid:t.uuid,src:t.src,autoplay:t.autoplay,loop:t.loop,controls:t.controls,mask:t.mask,colors:t.colors,time:t.time,playing:t.playing,duration:t.duration,hoverable:t.hoverable,onPlay:t.play,onStop:t.stop,onTimeupdate:e[1]||(e[1]=({currentTime:o})=>t.time.current=o),onPosition:t.position,onFullScreen:t.fullScreen,onSetPlayer:t.setPlayer,onIsPlaying:t.isPlaying},null,8,["uuid","src","autoplay","loop","controls","mask","colors","time","playing","duration","hoverable","onPlay","onStop","onPosition","onFullScreen","onSetPlayer","onIsPlaying"]))])}function pd(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document=="undefined")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var md=`/*! tailwindcss v2.1.2 | MIT License | https://tailwindcss.com*/

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}p{margin:0}*,:after,:before{box-sizing:border-box;border:0 solid #e5e7eb}img{border-style:solid}input:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder{opacity:1;color:#9ca3af}[role=button]{cursor:pointer}input{padding:0;line-height:inherit;color:inherit}img,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.vue3-player-video .appearance-none{-webkit-appearance:none;appearance:none}.vue3-player-video .bg-black{--tw-bg-opacity:1;background-color:rgba(0,0,0,var(--tw-bg-opacity))}.vue3-player-video .bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.vue3-player-video .bg-gradient-to-r{background-image:linear-gradient(90deg,var(--tw-gradient-stops))}.vue3-player-video .bg-opacity-20{--tw-bg-opacity:0.2}.vue3-player-video .bg-opacity-30{--tw-bg-opacity:0.3}.vue3-player-video .bg-opacity-40{--tw-bg-opacity:0.4}.vue3-player-video .bg-opacity-50{--tw-bg-opacity:0.5}.vue3-player-video .bg-opacity-60{--tw-bg-opacity:0.6}.vue3-player-video .hover\\:bg-opacity-40:hover{--tw-bg-opacity:0.4}.vue3-player-video .rounded-sm{border-radius:.125rem}.vue3-player-video .rounded-md{border-radius:.375rem}.vue3-player-video .rounded-lg{border-radius:.5rem}.vue3-player-video .rounded-xl{border-radius:.75rem}.vue3-player-video .rounded-3xl{border-radius:1.5rem}.vue3-player-video .rounded-full{border-radius:9999px}.vue3-player-video .cursor-pointer{cursor:pointer}.vue3-player-video .flex{display:flex}.vue3-player-video .items-center{align-items:center}.vue3-player-video .justify-start{justify-content:flex-start}.vue3-player-video .justify-end{justify-content:flex-end}.vue3-player-video .justify-center{justify-content:center}.vue3-player-video .justify-between{justify-content:space-between}.vue3-player-video .font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.vue3-player-video .font-medium{font-weight:500}.vue3-player-video .h-1{height:.25rem}.vue3-player-video .h-20{height:5rem}.vue3-player-video .h-full{height:100%}.vue3-player-video .text-xs{font-size:.75rem;line-height:1rem}.vue3-player-video .ml-2{margin-left:.5rem}.vue3-player-video .mr-3{margin-right:.75rem}.vue3-player-video .ml-4{margin-left:1rem}.vue3-player-video .mr-5{margin-right:1.25rem}.vue3-player-video .ml-5{margin-left:1.25rem}.vue3-player-video .mr-6{margin-right:1.5rem}.vue3-player-video .opacity-0{opacity:0}.vue3-player-video .overflow-hidden{overflow:hidden}.vue3-player-video .py-1{padding-top:.25rem;padding-bottom:.25rem}.vue3-player-video .py-2{padding-top:.5rem;padding-bottom:.5rem}.vue3-player-video .px-2{padding-left:.5rem;padding-right:.5rem}.vue3-player-video .py-3{padding-top:.75rem;padding-bottom:.75rem}.vue3-player-video .px-3{padding-left:.75rem;padding-right:.75rem}.vue3-player-video .py-4{padding-top:1rem;padding-bottom:1rem}.vue3-player-video .px-5{padding-left:1.25rem;padding-right:1.25rem}.vue3-player-video .pt-3{padding-top:.75rem}.vue3-player-video .pb-5{padding-bottom:1.25rem}.vue3-player-video .pointer-events-none{pointer-events:none}.vue3-player-video .absolute{position:absolute}.vue3-player-video .relative{position:relative}.vue3-player-video .top-0{top:0}.vue3-player-video .bottom-0{bottom:0}.vue3-player-video .left-0{left:0}*{--tw-shadow:0 0 transparent}.vue3-player-video .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,0.1),0 10px 10px -5px rgba(0,0,0,0.04);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}*{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.vue3-player-video .text-center{text-align:center}.vue3-player-video .text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.vue3-player-video .whitespace-nowrap{white-space:nowrap}.vue3-player-video .w-3{width:.75rem}.vue3-player-video .w-4{width:1rem}.vue3-player-video .w-5{width:1.25rem}.vue3-player-video .w-12{width:3rem}.vue3-player-video .w-20{width:5rem}.vue3-player-video .w-24{width:6rem}.vue3-player-video .w-32{width:8rem}.vue3-player-video .w-full{width:100%}.vue3-player-video .z-10{z-index:10}.vue3-player-video .transform{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.vue3-player-video .origin-left{transform-origin:left}.vue3-player-video .-rotate-90{--tw-rotate:-90deg}.vue3-player-video .translate-x-0{--tw-translate-x:0px}.vue3-player-video .translate-x-2{--tw-translate-x:0.5rem}.vue3-player-video .translate-x-9{--tw-translate-x:2.25rem}.vue3-player-video .-translate-y-1{--tw-translate-y:-0.25rem}.vue3-player-video .-translate-y-4{--tw-translate-y:-1rem}.vue3-player-video .translate-y-full{--tw-translate-y:100%}.vue3-player-video .transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.vue3-player-video .ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.vue3-player-video .duration-200{transition-duration:.2s}.vue3-player-video .duration-300{transition-duration:.3s}@keyframes spin{to{transform:rotate(1turn)}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}.vue3-player-video .filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.vue3-player-video .blur-sm{--tw-blur:blur(4px)}.vue3-player-video .blur{--tw-blur:blur(8px)}.vue3-player-video .backdrop-filter{--tw-backdrop-blur:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-invert:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-opacity:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-backdrop-sepia:var(--tw-empty,/*!*/ /*!*/);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.overlay{background:linear-gradient(0deg,rgba(0,0,0,.41961),transparent)}.vertical-range::-webkit-slider-thumb{width:6px;-webkit-appearance:none;appearance:none;height:6px;background-color:#fff;cursor:ns-resize;box-shadow:-405px 0 0 400px hsla(0,0%,100%,.6);border-radius:50%}.backdrop-filter{-webkit-backdrop-filter:blur(15px)!important;backdrop-filter:blur(15px)!important}.filter-white:hover{filter:brightness(2)}.gradient-variable{--tw-gradient-from:#fbbf24;--tw-gradient-to:#ec4899;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(251,191,36,0))}`;pd(md);Uo.render=fd;var gd=(()=>{const t=Uo;return t.install=e=>{e.component("Vue3PlayerVideo",t)},t})(),yd=gd;const vd={class:"w-full xl:bg-slate-100 pt-12 pb-5"},wd={class:"section-container"},bd={setup(t){const e="https://dl.dropbox.com/s/ggu2nnvsddf45he/Tretan%20Muslim%20_%20Luna%20Prewedding%20Video%20%28%20720%20X%201280%20%29.mp4?dl=2";return(n,r)=>(E(),k("section",vd,[f("section",wd,[y(yt,{class:"max-w-9/12",title:"Video Kami",subtitle:""})]),y(Ft(yd),{"data-aos":"zoom-in",class:"w-10/12 mx-auto",src:e})]))}},Ed={key:0,class:"text-black font-regular mb-2",style:{"font-size":"small"}},Td={props:{content:{type:String,default:"Example"},header:{type:String,required:!1,default:null}},setup(t){const e=t,n=j(e.content),r=()=>{navigator.clipboard&&navigator.clipboard.writeText(e.content).then(s=>n.value="Copied!").catch(s=>console.log(s))};return(s,i)=>(E(),k(Ke,null,[t.header?(E(),k("p",Ed,V(t.header),1)):De("",!0),f("button",{onClick:r,class:"active:scale-95 duration-300 bg-gray-800 text-sm text-gray-50 py-2 px-4 rounded-lg inline-block mt-1 mb-3"},[mt(V(n.value)+" ",1),f("i",{class:pt([n.value==="Copied!"?"fa-check":"fa-copy","fa-solid ml-2"])},null,2)])],64))}},Sd={class:"w-full xl:bg-slate-100 pt-12 pb-5"},Ad={class:"section-container"},Cd={class:""},Id=["src","alt"],_d={setup(t){const e=[{thumb:"wallets/bca.png",platform:"Bank BCA",number:"0885770946",alias:"PRISMA.MAMA.LANA"}];return(n,r)=>(E(),k("section",Sd,[f("section",Ad,[y(yt,{class:"max-w-9/12",title:"Amplop Digital",subtitle:"Doa restu anda merupakan karunia yang sangat berarti bagi kami dan jika memberi adalah ungkapan tanda terima kasih anda, anda dapat memberi kado secara cashless"}),f("section",Cd,[(E(),k(Ke,null,gt(e,(s,i)=>f("div",{key:i,"data-aos":"zoom-in",class:"w-8/12 text-center border border-gray-200 mx-auto p-5 mb-5 bg-gray-100 shadow-lg rounded-tl-3xl rounded-br-3xl"},[f("img",{src:s.thumb,alt:s.platform,class:"w-4/12 mx-auto mb-0"},null,8,Id),y(Td,{header:"Silahkan untuk melakukan transfer melalui rekening dibawah ini a.n. Hardianto Jouga Pratama",content:s.number},null,8,["content"])])),64))])])]))}},kd={key:0,class:"flex gap-2 mb-6"},Dd=f("i",{class:"fa fa-times"},null,-1),xd=[Dd],Nd={props:{statusResponse:{type:Boolean,default:!1},showAlert:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){return(n,r)=>t.showAlert?(E(),k("section",kd,[f("div",{class:pt([t.statusResponse?"bg-green-500":"bg-red-500","w-10/12 text-gray-100 p-2 text-center rounded-lg duration-300"])},V(t.statusResponse?"Mensaje enviado con exito":"El mensaje no se pudo enviar"),3),f("button",{onClick:r[0]||(r[0]=s=>e("close")),class:"text-black px-1 w-2/12 grid place-items-center border border-gray-600 rounded-lg"},xd)])):De("",!0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Rd=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Od={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,v=c&63;l||(v=64,o||(m=64)),r.push(n[u],n[h],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jo(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rd(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw Error();const m=i<<2|a>>4;if(r.push(m),c!==64){const v=a<<4&240|c>>2;if(r.push(v),h!==64){const A=c<<6&192|h;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},$d=function(t){const e=jo(t);return Od.encodeByteArray(e,!0)},Ho=function(t){return $d(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Md(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rr())}function Ld(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Fd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bd(){return rr().indexOf("Electron/")>=0}function Vd(){const t=rr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ud(){return rr().indexOf("MSAppHost/")>=0}function jd(){return typeof indexedDB=="object"}function Hd(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="FirebaseError";class bt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qd,Object.setPrototypeOf(this,bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qo.prototype.create)}}class qo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zd(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new bt(s,a,r)}}function zd(t,e){return t.replace(Kd,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Kd=/\{\$([^}]+)}/g;function zr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ci(i)&&Ci(o)){if(!zr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ci(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class Vt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Pd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xd(e))try{this.getOrInitializeService({instanceIdentifier:$e})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$e){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$e){return this.instances.has(e)}getOptions(e=$e){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wd(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$e){return this.component?this.component.multipleInstances?e:$e:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wd(t){return t===$e?void 0:t}function Xd(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Gd(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(N||(N={}));const Yd={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},Jd=N.INFO,Zd={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},ef=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Zd[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zo{constructor(e){this.name=e,this._logLevel=Jd,this._logHandler=ef,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in N))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...e),this._logHandler(this,N.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...e),this._logHandler(this,N.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,N.INFO,...e),this._logHandler(this,N.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,N.WARN,...e),this._logHandler(this,N.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,N.ERROR,...e),this._logHandler(this,N.ERROR,...e)}}const tf=(t,e)=>e.some(n=>t instanceof n);let Ii,_i;function nf(){return Ii||(Ii=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rf(){return _i||(_i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ko=new WeakMap,Kr=new WeakMap,Go=new WeakMap,Dr=new WeakMap,Ss=new WeakMap;function sf(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_e(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ko.set(n,t)}).catch(()=>{}),Ss.set(e,t),e}function of(t){if(Kr.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kr.set(t,e)}let Gr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Go.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _e(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function af(t){Gr=t(Gr)}function lf(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xr(this),e,...n);return Go.set(r,e.sort?e.sort():[e]),_e(r)}:rf().includes(t)?function(...e){return t.apply(xr(this),e),_e(Ko.get(this))}:function(...e){return _e(t.apply(xr(this),e))}}function uf(t){return typeof t=="function"?lf(t):(t instanceof IDBTransaction&&of(t),tf(t,nf())?new Proxy(t,Gr):t)}function _e(t){if(t instanceof IDBRequest)return sf(t);if(Dr.has(t))return Dr.get(t);const e=uf(t);return e!==t&&(Dr.set(t,e),Ss.set(e,t)),e}const xr=t=>Ss.get(t);function cf(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=_e(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_e(o.result),l.oldVersion,l.newVersion,_e(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const hf=["get","getKey","getAll","getAllKeys","count"],df=["put","add","delete","clear"],Nr=new Map;function ki(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nr.get(e))return Nr.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=df.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hf.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Nr.set(e,i),i}af(t=>di(hi({},t),{get:(e,n,r)=>ki(e,n)||t.get(e,n,r),has:(e,n)=>!!ki(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pf(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pf(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wr="@firebase/app",Di="0.7.31";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be=new zo("@firebase/app"),mf="@firebase/app-compat",gf="@firebase/analytics-compat",yf="@firebase/analytics",vf="@firebase/app-check-compat",wf="@firebase/app-check",bf="@firebase/auth",Ef="@firebase/auth-compat",Tf="@firebase/database",Sf="@firebase/database-compat",Af="@firebase/functions",Cf="@firebase/functions-compat",If="@firebase/installations",_f="@firebase/installations-compat",kf="@firebase/messaging",Df="@firebase/messaging-compat",xf="@firebase/performance",Nf="@firebase/performance-compat",Rf="@firebase/remote-config",Of="@firebase/remote-config-compat",$f="@firebase/storage",Pf="@firebase/storage-compat",Mf="@firebase/firestore",Lf="@firebase/firestore-compat",Ff="firebase",Bf="9.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]",Vf={[Wr]:"fire-core",[mf]:"fire-core-compat",[yf]:"fire-analytics",[gf]:"fire-analytics-compat",[wf]:"fire-app-check",[vf]:"fire-app-check-compat",[bf]:"fire-auth",[Ef]:"fire-auth-compat",[Tf]:"fire-rtdb",[Sf]:"fire-rtdb-compat",[Af]:"fire-fn",[Cf]:"fire-fn-compat",[If]:"fire-iid",[_f]:"fire-iid-compat",[kf]:"fire-fcm",[Df]:"fire-fcm-compat",[xf]:"fire-perf",[Nf]:"fire-perf-compat",[Rf]:"fire-rc",[Of]:"fire-rc-compat",[$f]:"fire-gcs",[Pf]:"fire-gcs-compat",[Mf]:"fire-fst",[Lf]:"fire-fst-compat","fire-js":"fire-js",[Ff]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Map,Xr=new Map;function Uf(t,e){try{t.container.addComponent(e)}catch(n){Be.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(Xr.has(e))return Be.debug(`There were multiple attempts to register component ${e}.`),!1;Xr.set(e,t);for(const n of Nn.values())Uf(n,t);return!0}function jf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ve=new qo("app","Firebase",Hf);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ve.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=Bf;function Kf(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:Wo,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Ve.create("bad-app-name",{appName:String(r)});const s=Nn.get(r);if(s){if(zr(t,s.options)&&zr(n,s.config))return s;throw Ve.create("duplicate-app",{appName:r})}const i=new Qd(r);for(const a of Xr.values())i.addComponent(a);const o=new qf(t,n,i);return Nn.set(r,o),o}function Gf(t=Wo){const e=Nn.get(t);if(!e)throw Ve.create("no-app",{appName:t});return e}function tt(t,e,n){var r;let s=(r=Vf[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Be.warn(a.join(" "));return}Rn(new Vt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="firebase-heartbeat-database",Xf=1,Ut="firebase-heartbeat-store";let Rr=null;function Xo(){return Rr||(Rr=cf(Wf,Xf,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ut)}}}).catch(t=>{throw Ve.create("idb-open",{originalErrorMessage:t.message})})),Rr}async function Qf(t){var e;try{return(await Xo()).transaction(Ut).objectStore(Ut).get(Qo(t))}catch(n){if(n instanceof bt)Be.warn(n.message);else{const r=Ve.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});Be.warn(r.message)}}}async function xi(t,e){var n;try{const s=(await Xo()).transaction(Ut,"readwrite");return await s.objectStore(Ut).put(e,Qo(t)),s.done}catch(r){if(r instanceof bt)Be.warn(r.message);else{const s=Ve.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});Be.warn(s.message)}}}function Qo(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=1024,Jf=30*24*60*60*1e3;class Zf{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ni();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Jf}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ni(),{heartbeatsToSend:n,unsentEntries:r}=ep(this._heartbeatsCache.heartbeats),s=Ho(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ni(){return new Date().toISOString().substring(0,10)}function ep(t,e=Yf){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ri(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ri(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tp{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jd()?Hd().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Qf(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xi(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xi(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ri(t){return Ho(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){Rn(new Vt("platform-logger",e=>new ff(e),"PRIVATE")),Rn(new Vt("heartbeat",e=>new Zf(e),"PRIVATE")),tt(Wr,Di,t),tt(Wr,Di,"esm2017"),tt("fire-js","")}np("");var rp=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},g,As=As||{},b=rp||self;function On(){}function Qr(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function rn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function sp(t){return Object.prototype.hasOwnProperty.call(t,Or)&&t[Or]||(t[Or]=++ip)}var Or="closure_uid_"+(1e9*Math.random()>>>0),ip=0;function op(t,e,n){return t.call.apply(t.bind,arguments)}function ap(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function X(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?X=op:X=ap,X.apply(null,arguments)}function vn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function J(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Re(){this.s=this.s,this.o=this.o}var lp=0,up={};Re.prototype.s=!1;Re.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),lp!=0)){var t=sp(this);delete up[t]}};Re.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Jo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function cp(t){e:{var e=tm;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Oi(t){return Array.prototype.concat.apply([],arguments)}function Cs(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function $n(t){return/^[\s\xa0]*$/.test(t)}var $i=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ne(t,e){return t.indexOf(e)!=-1}function $r(t,e){return t<e?-1:t>e?1:0}var re;e:{var Pi=b.navigator;if(Pi){var Mi=Pi.userAgent;if(Mi){re=Mi;break e}}re=""}function Is(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Zo(t){const e={};for(const n in t)e[n]=t[n];return e}var Li="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ea(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Li.length;i++)n=Li[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _s(t){return _s[" "](t),t}_s[" "]=On;function hp(t){var e=pp;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var dp=ne(re,"Opera"),lt=ne(re,"Trident")||ne(re,"MSIE"),ta=ne(re,"Edge"),Yr=ta||lt,na=ne(re,"Gecko")&&!(ne(re.toLowerCase(),"webkit")&&!ne(re,"Edge"))&&!(ne(re,"Trident")||ne(re,"MSIE"))&&!ne(re,"Edge"),fp=ne(re.toLowerCase(),"webkit")&&!ne(re,"Edge");function ra(){var t=b.document;return t?t.documentMode:void 0}var Pn;e:{var Pr="",Mr=function(){var t=re;if(na)return/rv:([^\);]+)(\)|;)/.exec(t);if(ta)return/Edge\/([\d\.]+)/.exec(t);if(lt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fp)return/WebKit\/(\S+)/.exec(t);if(dp)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Mr&&(Pr=Mr?Mr[1]:""),lt){var Lr=ra();if(Lr!=null&&Lr>parseFloat(Pr)){Pn=String(Lr);break e}}Pn=Pr}var pp={};function mp(){return hp(function(){let t=0;const e=$i(String(Pn)).split("."),n=$i("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=$r(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||$r(s[2].length==0,i[2].length==0)||$r(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Jr;if(b.document&&lt){var Fi=ra();Jr=Fi||parseInt(Pn,10)||void 0}else Jr=void 0;var gp=Jr,yp=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{b.addEventListener("test",On,e),b.removeEventListener("test",On,e)}catch{}return t}();function te(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};function jt(t,e){if(te.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(na){e:{try{_s(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:vp[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&jt.Z.h.call(this)}}J(jt,te);var vp={2:"touch",3:"pen",4:"mouse"};jt.prototype.h=function(){jt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),wp=0;function bp(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++wp,this.ca=this.fa=!1}function sr(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ir(t){this.src=t,this.g={},this.h=0}ir.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=es(t,e,r,s);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new bp(e,this.src,i,!!r,s),e.fa=n,t.push(e)),e};function Zr(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Yo(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(sr(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function es(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}var ks="closure_lm_"+(1e6*Math.random()|0),Fr={};function sa(t,e,n,r,s){if(r&&r.once)return oa(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)sa(t,e[i],n,r,s);return null}return n=Ns(n),t&&t[sn]?t.N(e,n,rn(r)?!!r.capture:!!r,s):ia(t,e,n,!1,r,s)}function ia(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=rn(s)?!!s.capture:!!s,a=xs(t);if(a||(t[ks]=a=new ir(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=Ep(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yp||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(la(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Ep(){function t(n){return e.call(t.src,t.listener,n)}var e=Tp;return t}function oa(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)oa(t,e[i],n,r,s);return null}return n=Ns(n),t&&t[sn]?t.O(e,n,rn(r)?!!r.capture:!!r,s):ia(t,e,n,!0,r,s)}function aa(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)aa(t,e[i],n,r,s);else r=rn(r)?!!r.capture:!!r,n=Ns(n),t&&t[sn]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=es(i,n,r,s),-1<n&&(sr(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=xs(t))&&(e=t.g[e.toString()],t=-1,e&&(t=es(e,n,r,s)),(n=-1<t?e[t]:null)&&Ds(n))}function Ds(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[sn])Zr(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(la(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xs(e))?(Zr(n,t),n.h==0&&(n.src=null,e[ks]=null)):sr(t)}}}function la(t){return t in Fr?Fr[t]:Fr[t]="on"+t}function Tp(t,e){if(t.ca)t=!0;else{e=new jt(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ds(t),t=n.call(r,e)}return t}function xs(t){return t=t[ks],t instanceof ir?t:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ns(t){return typeof t=="function"?t:(t[Br]||(t[Br]=function(e){return t.handleEvent(e)}),t[Br])}function K(){Re.call(this),this.i=new ir(this),this.P=this,this.I=null}J(K,Re);K.prototype[sn]=!0;K.prototype.removeEventListener=function(t,e,n,r){aa(this,t,e,n,r)};function Q(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new te(e,t);else if(e instanceof te)e.target=e.target||t;else{var s=e;e=new te(r,t),ea(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=wn(o,r,!0,e)&&s}if(o=e.g=t,s=wn(o,r,!0,e)&&s,s=wn(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=wn(o,r,!1,e)&&s}K.prototype.M=function(){if(K.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sr(n[r]);delete t.g[e],t.h--}}this.I=null};K.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};K.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function wn(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Zr(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Rs=b.JSON.stringify;function Sp(){var t=ca;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Ap{constructor(){this.h=this.g=null}add(e,n){const r=ua.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ua=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Cp,t=>t.reset());class Cp{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ip(t){b.setTimeout(()=>{throw t},0)}function Os(t,e){ts||_p(),ns||(ts(),ns=!0),ca.add(t,e)}var ts;function _p(){var t=b.Promise.resolve(void 0);ts=function(){t.then(kp)}}var ns=!1,ca=new Ap;function kp(){for(var t;t=Sp();){try{t.h.call(t.g)}catch(n){Ip(n)}var e=ua;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ns=!1}function or(t,e){K.call(this),this.h=t||1,this.g=e||b,this.j=X(this.kb,this),this.l=Date.now()}J(or,K);g=or.prototype;g.da=!1;g.S=null;g.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Q(this,"tick"),this.da&&($s(this),this.start()))}};g.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function $s(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}g.M=function(){or.Z.M.call(this),$s(this),delete this.g};function Ps(t,e,n){if(typeof t=="function")n&&(t=X(t,n));else if(t&&typeof t.handleEvent=="function")t=X(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:b.setTimeout(t,e||0)}function ha(t){t.g=Ps(()=>{t.g=null,t.i&&(t.i=!1,ha(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Dp extends Re{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ha(this)}M(){super.M(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(t){Re.call(this),this.h=t,this.g={}}J(Ht,Re);var Bi=[];function da(t,e,n,r){Array.isArray(n)||(n&&(Bi[0]=n.toString()),n=Bi);for(var s=0;s<n.length;s++){var i=sa(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function fa(t){Is(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ds(e)},t),t.g={}}Ht.prototype.M=function(){Ht.Z.M.call(this),fa(this)};Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ar(){this.g=!0}ar.prototype.Aa=function(){this.g=!1};function xp(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function Np(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ze(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Op(t,n)+(r?" "+r:"")})}function Rp(t,e){t.info(function(){return"TIMEOUT: "+e})}ar.prototype.info=function(){};function Op(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Rs(n)}catch{return e}}var We={},Vi=null;function lr(){return Vi=Vi||new K}We.Ma="serverreachability";function pa(t){te.call(this,We.Ma,t)}J(pa,te);function qt(t){const e=lr();Q(e,new pa(e,t))}We.STAT_EVENT="statevent";function ma(t,e){te.call(this,We.STAT_EVENT,t),this.stat=e}J(ma,te);function se(t){const e=lr();Q(e,new ma(e,t))}We.Na="timingevent";function ga(t,e){te.call(this,We.Na,t),this.size=e}J(ga,te);function on(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){t()},e)}var ur={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ya={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ms(){}Ms.prototype.h=null;function Ui(t){return t.h||(t.h=t.i())}function va(){}var an={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ls(){te.call(this,"d")}J(Ls,te);function Fs(){te.call(this,"c")}J(Fs,te);var rs;function cr(){}J(cr,Ms);cr.prototype.g=function(){return new XMLHttpRequest};cr.prototype.i=function(){return{}};rs=new cr;function ln(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ht(this),this.P=$p,t=Yr?125:void 0,this.W=new or(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new wa}function wa(){this.i=null,this.g="",this.h=!1}var $p=45e3,ss={},Mn={};g=ln.prototype;g.setTimeout=function(t){this.P=t};function is(t,e,n){t.K=1,t.v=dr(Ae(e)),t.s=n,t.U=!0,ba(t,null)}function ba(t,e){t.F=Date.now(),un(t),t.A=Ae(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),_a(n.h,"t",r),t.C=0,n=t.l.H,t.h=new wa,t.g=Ga(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Dp(X(t.Ia,t,t.g),t.O)),da(t.V,t.g,"readystatechange",t.gb),e=t.H?Zo(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),qt(1),xp(t.j,t.u,t.A,t.m,t.X,t.s)}g.gb=function(t){t=t.target;const e=this.L;e&&Ee(t)==3?e.l():this.Ia(t)};g.Ia=function(t){try{if(t==this.g)e:{const u=Ee(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(u!=3||Yr||this.g&&(this.h.h||this.g.ga()||zi(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?qt(3):qt(2)),hr(this);var n=this.g.ba();this.N=n;t:if(Ea(this)){var r=zi(this.g);t="";var s=r.length,i=Ee(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Pe(this),Rt(this);var o="";break t}this.h.i=new b.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,Np(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$n(a)){var c=a;break t}}c=null}if(n=c)Ze(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,os(this,n);else{this.i=!1,this.o=3,se(12),Pe(this),Rt(this);break e}}this.U?(Ta(this,u,o),Yr&&this.i&&u==3&&(da(this.V,this.W,"tick",this.fb),this.W.start())):(Ze(this.j,this.m,o,null),os(this,o)),u==4&&Pe(this),this.i&&!this.I&&(u==4?Ha(this.l,this):(this.i=!1,un(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,se(12)):(this.o=0,se(13)),Pe(this),Rt(this)}}}catch{}finally{}};function Ea(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function Ta(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=Pp(t,n),s==Mn){e==4&&(t.o=4,se(14),r=!1),Ze(t.j,t.m,null,"[Incomplete Response]");break}else if(s==ss){t.o=4,se(15),Ze(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ze(t.j,t.m,s,null),os(t,s);Ea(t)&&s!=Mn&&s!=ss&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,se(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gs(e),e.L=!0,se(11))):(Ze(t.j,t.m,n,"[Invalid Chunked Response]"),Pe(t),Rt(t))}g.fb=function(){if(this.g){var t=Ee(this.g),e=this.g.ga();this.C<e.length&&(hr(this),Ta(this,t,e),this.i&&t!=4&&un(this))}};function Pp(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Mn:(n=Number(e.substring(n,r)),isNaN(n)?ss:(r+=1,r+n>e.length?Mn:(e=e.substr(r,n),t.C=r+n,e)))}g.cancel=function(){this.I=!0,Pe(this)};function un(t){t.Y=Date.now()+t.P,Sa(t,t.P)}function Sa(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=on(X(t.eb,t),e)}function hr(t){t.B&&(b.clearTimeout(t.B),t.B=null)}g.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Rp(this.j,this.A),this.K!=2&&(qt(3),se(17)),Pe(this),this.o=2,Rt(this)):Sa(this,this.Y-t)};function Rt(t){t.l.G==0||t.I||Ha(t.l,t)}function Pe(t){hr(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,$s(t.W),fa(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function os(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||as(n.i,t))){if(n.I=t.N,!t.J&&as(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Vn(n),mr(n);else break e;Ks(n),se(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=on(X(n.ab,n),6e3));if(1>=xa(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Me(n,11)}else if((t.J||n.g==t)&&Vn(n),!$n(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const u=c[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));const h=c[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const A=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var i=r.i;!i.g&&(ne(A,"spdy")||ne(A,"quic")||ne(A,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Us(i,i.h),i.h=null))}if(r.D){const x=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.sa=x,$(r.F,r.D,x))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=Ka(r,r.H?r.la:null,r.W),o.J){Na(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(hr(a),un(a)),r.g=o}else Ua(r);0<n.l.length&&gr(n)}else c[0]!="stop"&&c[0]!="close"||Me(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Me(n,7):zs(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}qt(4)}catch{}}function Mp(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Qr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Bs(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Qr(t)||typeof t=="string")Jo(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Qr(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=Mp(t),s=r.length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function Et(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Et)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}g=Et.prototype;g.R=function(){Vs(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};g.T=function(){return Vs(this),this.g.concat()};function Vs(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Ue(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],Ue(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}g.get=function(t,e){return Ue(this.h,t)?this.h[t]:e};g.set=function(t,e){Ue(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};g.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};function Ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Aa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lp(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function je(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof je){this.g=e!==void 0?e:t.g,Ln(this,t.j),this.s=t.s,Fn(this,t.i),Bn(this,t.m),this.l=t.l,e=t.h;var n=new zt;n.i=e.i,e.g&&(n.g=new Et(e.g),n.h=e.h),ji(this,n),this.o=t.o}else t&&(n=String(t).match(Aa))?(this.g=!!e,Ln(this,n[1]||"",!0),this.s=Ot(n[2]||""),Fn(this,n[3]||"",!0),Bn(this,n[4]),this.l=Ot(n[5]||"",!0),ji(this,n[6]||"",!0),this.o=Ot(n[7]||"")):(this.g=!!e,this.h=new zt(null,this.g))}je.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xt(e,Hi,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xt(e,Hi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(xt(n,n.charAt(0)=="/"?jp:Up,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xt(n,qp)),t.join("")};function Ae(t){return new je(t)}function Ln(t,e,n){t.j=n?Ot(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fn(t,e,n){t.i=n?Ot(e,!0):e}function Bn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ji(t,e,n){e instanceof zt?(t.h=e,zp(t.h,t.g)):(n||(e=xt(e,Hp)),t.h=new zt(e,t.g))}function $(t,e,n){t.h.set(e,n)}function dr(t){return $(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fp(t){return t instanceof je?Ae(t):new je(t,void 0)}function Bp(t,e,n,r){var s=new je(null,void 0);return t&&Ln(s,t),e&&Fn(s,e),n&&Bn(s,n),r&&(s.l=r),s}function Ot(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xt(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Vp),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vp(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Hi=/[#\/\?@]/g,Up=/[#\?:]/g,jp=/[#\?]/g,Hp=/[#\?@]/g,qp=/#/g;function zt(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Oe(t){t.g||(t.g=new Et,t.h=0,t.i&&Lp(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}g=zt.prototype;g.add=function(t,e){Oe(this),this.i=null,t=Tt(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ca(t,e){Oe(t),e=Tt(t,e),Ue(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Ue(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Vs(t)))}function Ia(t,e){return Oe(t),e=Tt(t,e),Ue(t.g.h,e)}g.forEach=function(t,e){Oe(this),this.g.forEach(function(n,r){Jo(n,function(s){t.call(e,s,r,this)},this)},this)};g.T=function(){Oe(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n};g.R=function(t){Oe(this);var e=[];if(typeof t=="string")Ia(this,t)&&(e=Oi(e,this.g.get(Tt(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Oi(e,t[n])}return e};g.set=function(t,e){return Oe(this),this.i=null,t=Tt(this,t),Ia(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};g.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function _a(t,e,n){Ca(t,e),0<n.length&&(t.i=null,t.g.set(Tt(t,e),Cs(n)),t.h+=n.length)}g.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;r[i]!==""&&(o+="="+encodeURIComponent(String(r[i]))),t.push(o)}}return this.i=t.join("&")};function Tt(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function zp(t,e){e&&!t.j&&(Oe(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Ca(this,r),_a(this,s,n))},t)),t.j=e}var Kp=class{constructor(t,e){this.h=t,this.g=e}};function ka(t){this.l=t||Gp,b.PerformanceNavigationTiming?(t=b.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(b.g&&b.g.Ea&&b.g.Ea()&&b.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gp=10;function Da(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function xa(t){return t.h?1:t.g?t.g.size:0}function as(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Us(t,e){t.g?t.g.add(e):t.h=e}function Na(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}ka.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ra(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Cs(t.i)}function js(){}js.prototype.stringify=function(t){return b.JSON.stringify(t,void 0)};js.prototype.parse=function(t){return b.JSON.parse(t,void 0)};function Wp(){this.g=new js}function Xp(t,e,n){const r=n||"";try{Bs(t,function(s,i){let o=s;rn(s)&&(o=Rs(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Qp(t,e){const n=new ar;if(b.Image){const r=new Image;r.onload=vn(bn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vn(bn,n,r,"TestLoadImage: error",!1,e),r.onabort=vn(bn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vn(bn,n,r,"TestLoadImage: timeout",!1,e),b.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function bn(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function cn(t){this.l=t.$b||null,this.j=t.ib||!1}J(cn,Ms);cn.prototype.g=function(){return new fr(this.l,this.j)};cn.prototype.i=function(t){return function(){return t}}({});function fr(t,e){K.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Hs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}J(fr,K);var Hs=0;g=fr.prototype;g.open=function(t,e){if(this.readyState!=Hs)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Kt(this)};g.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||b).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};g.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hn(this)),this.readyState=Hs};g.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof b.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oa(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function Oa(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}g.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?hn(this):Kt(this),this.readyState==3&&Oa(this)}};g.Ua=function(t){this.g&&(this.response=this.responseText=t,hn(this))};g.Ta=function(t){this.g&&(this.response=t,hn(this))};g.ha=function(){this.g&&hn(this)};function hn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Kt(t)}g.setRequestHeader=function(t,e){this.v.append(t,e)};g.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};g.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Kt(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Yp=b.JSON.parse;function F(t){K.call(this),this.headers=new Et,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$a,this.K=this.L=!1}J(F,K);var $a="",Jp=/^https?$/i,Zp=["POST","PUT"];g=F.prototype;g.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rs.g(),this.C=this.u?Ui(this.u):Ui(rs),this.g.onreadystatechange=X(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){qi(this,i);return}t=n||"";const s=new Et(this.headers);r&&Bs(r,function(i,o){s.set(o,i)}),r=cp(s.T()),n=b.FormData&&t instanceof b.FormData,!(0<=Yo(Zp,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{La(this),0<this.B&&((this.K=em(this.g))?(this.g.timeout=this.B,this.g.ontimeout=X(this.pa,this)):this.A=Ps(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){qi(this,i)}};function em(t){return lt&&mp()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function tm(t){return t.toLowerCase()=="content-type"}g.pa=function(){typeof As!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Q(this,"timeout"),this.abort(8))};function qi(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Pa(t),pr(t)}function Pa(t){t.D||(t.D=!0,Q(t,"complete"),Q(t,"error"))}g.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Q(this,"complete"),Q(this,"abort"),pr(this))};g.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pr(this,!0)),F.Z.M.call(this)};g.Fa=function(){this.s||(this.F||this.v||this.l?Ma(this):this.cb())};g.cb=function(){Ma(this)};function Ma(t){if(t.h&&typeof As!="undefined"&&(!t.C[1]||Ee(t)!=4||t.ba()!=2)){if(t.v&&Ee(t)==4)Ps(t.Fa,0,t);else if(Q(t,"readystatechange"),Ee(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(Aa)[1]||null;if(!s&&b.self&&b.self.location){var i=b.self.location.protocol;s=i.substr(0,i.length-1)}r=!Jp.test(s?s.toLowerCase():"")}n=r}if(n)Q(t,"complete"),Q(t,"success");else{t.m=6;try{var o=2<Ee(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",Pa(t)}}finally{pr(t)}}}}function pr(t,e){if(t.g){La(t);const n=t.g,r=t.C[0]?On:null;t.g=null,t.C=null,e||Q(t,"ready");try{n.onreadystatechange=r}catch{}}}function La(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(b.clearTimeout(t.A),t.A=null)}function Ee(t){return t.g?t.g.readyState:0}g.ba=function(){try{return 2<Ee(this)?this.g.status:-1}catch{return-1}};g.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};g.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Yp(e)}};function zi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case $a:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}g.Da=function(){return this.m};g.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function nm(t){let e="";return Is(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function qs(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=nm(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$(t,e,n))}function Dt(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fa(t){this.za=0,this.l=[],this.h=new ar,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dt("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dt("baseRetryDelayMs",5e3,t),this.$a=Dt("retryDelaySeedMs",1e4,t),this.Ya=Dt("forwardChannelMaxRetries",2,t),this.ra=Dt("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ka(t&&t.concurrentRequestLimit),this.Ca=new Wp,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}g=Fa.prototype;g.ma=8;g.G=1;function zs(t){if(Ba(t),t.G==3){var e=t.V++,n=Ae(t.F);$(n,"SID",t.J),$(n,"RID",e),$(n,"TYPE","terminate"),dn(t,n),e=new ln(t,t.h,e,void 0),e.K=2,e.v=dr(Ae(n)),n=!1,b.navigator&&b.navigator.sendBeacon&&(n=b.navigator.sendBeacon(e.v.toString(),"")),!n&&b.Image&&(new Image().src=e.v,n=!0),n||(e.g=Ga(e.l,null),e.g.ea(e.v)),e.F=Date.now(),un(e)}za(t)}g.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function mr(t){t.g&&(Gs(t),t.g.cancel(),t.g=null)}function Ba(t){mr(t),t.u&&(b.clearTimeout(t.u),t.u=null),Vn(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&b.clearTimeout(t.m),t.m=null)}function Vr(t,e){t.l.push(new Kp(t.Za++,e)),t.G==3&&gr(t)}function gr(t){Da(t.i)||t.m||(t.m=!0,Os(t.Ha,t),t.C=0)}function rm(t,e){return xa(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=on(X(t.Ha,t,e),qa(t,t.C)),t.C++,!0)}g.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new ln(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=Zo(i),ea(i,this.P)):i=this.P),this.o===null&&(s.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Va(this,s,e),n=Ae(this.F),$(n,"RID",t),$(n,"CVER",22),this.D&&$(n,"X-HTTP-Session-Id",this.D),dn(this,n),this.o&&i&&qs(n,this.o,i),Us(this.i,s),this.Ra&&$(n,"TYPE","init"),this.ja?($(n,"$req",e),$(n,"SID","null"),s.$=!0,is(s,n,null)):is(s,n,e),this.G=2}}else this.G==3&&(t?Ki(this,t):this.l.length==0||Da(this.i)||Ki(this))};function Ki(t,e){var n;e?n=e.m:n=t.V++;const r=Ae(t.F);$(r,"SID",t.J),$(r,"RID",n),$(r,"AID",t.U),dn(t,r),t.o&&t.s&&qs(r,t.o,t.s),n=new ln(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Va(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Us(t.i,n),is(n,r,e)}function dn(t,e){t.j&&Bs({},function(n,r){$(e,r,n)})}function Va(t,e,n){n=Math.min(t.l.length,n);var r=t.j?X(t.j.Oa,t.j,t):null;e:{var s=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].h;const u=s[l].g;if(c-=i,0>c)i=Math.max(0,s[l].h-100),a=!1;else try{Xp(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function Ua(t){t.g||t.u||(t.Y=1,Os(t.Ga,t),t.A=0)}function Ks(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=on(X(t.Ga,t),qa(t,t.A)),t.A++,!0)}g.Ga=function(){if(this.u=null,ja(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=on(X(this.bb,this),t)}};g.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,se(10),mr(this),ja(this))};function Gs(t){t.B!=null&&(b.clearTimeout(t.B),t.B=null)}function ja(t){t.g=new ln(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Ae(t.oa);$(e,"RID","rpc"),$(e,"SID",t.J),$(e,"CI",t.N?"0":"1"),$(e,"AID",t.U),dn(t,e),$(e,"TYPE","xmlhttp"),t.o&&t.s&&qs(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=dr(Ae(e)),n.s=null,n.U=!0,ba(n,t)}g.ab=function(){this.v!=null&&(this.v=null,mr(this),Ks(this),se(19))};function Vn(t){t.v!=null&&(b.clearTimeout(t.v),t.v=null)}function Ha(t,e){var n=null;if(t.g==e){Vn(t),Gs(t),t.g=null;var r=2}else if(as(t.i,e))n=e.D,Na(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=lr(),Q(r,new ga(r,n,e,s)),gr(t)}else Ua(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&rm(t,e)||r==2&&Ks(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Me(t,5);break;case 4:Me(t,10);break;case 3:Me(t,6);break;default:Me(t,2)}}}function qa(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Me(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=X(t.jb,t);n||(n=new je("//www.google.com/images/cleardot.gif"),b.location&&b.location.protocol=="http"||Ln(n,"https"),dr(n)),Qp(n.toString(),r)}else se(2);t.G=0,t.j&&t.j.va(e),za(t),Ba(t)}g.jb=function(t){t?(this.h.info("Successfully pinged google.com"),se(2)):(this.h.info("Failed to ping google.com"),se(1))};function za(t){t.G=0,t.I=-1,t.j&&((Ra(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Cs(t.l),t.l.length=0),t.j.ua())}function Ka(t,e,n){let r=Fp(n);if(r.i!="")e&&Fn(r,e+"."+r.i),Bn(r,r.m);else{const s=b.location;r=Bp(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&Is(t.aa,function(s,i){$(r,i,s)}),e=t.D,n=t.sa,e&&n&&$(r,e,n),$(r,"VER",t.ma),dn(t,r),r}function Ga(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new F(new cn({ib:!0})):new F(t.qa),e.L=t.H,e}function Wa(){}g=Wa.prototype;g.xa=function(){};g.wa=function(){};g.va=function(){};g.ua=function(){};g.Oa=function(){};function Un(){if(lt&&!(10<=Number(gp)))throw Error("Environmental error: no available transport.")}Un.prototype.g=function(t,e){return new he(t,e)};function he(t,e){K.call(this),this.g=new Fa(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!$n(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$n(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new St(this)}J(he,K);he.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Os(X(t.hb,t,e))),se(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Ka(t,null,t.W),gr(t)};he.prototype.close=function(){zs(this.g)};he.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Vr(this.g,e)}else this.v?(e={},e.__data__=Rs(t),Vr(this.g,e)):Vr(this.g,t)};he.prototype.M=function(){this.g.j=null,delete this.j,zs(this.g),delete this.g,he.Z.M.call(this)};function Xa(t){Ls.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}J(Xa,Ls);function Qa(){Fs.call(this),this.status=1}J(Qa,Fs);function St(t){this.g=t}J(St,Wa);St.prototype.xa=function(){Q(this.g,"a")};St.prototype.wa=function(t){Q(this.g,new Xa(t))};St.prototype.va=function(t){Q(this.g,new Qa(t))};St.prototype.ua=function(){Q(this.g,"b")};Un.prototype.createWebChannel=Un.prototype.g;he.prototype.send=he.prototype.u;he.prototype.open=he.prototype.m;he.prototype.close=he.prototype.close;ur.NO_ERROR=0;ur.TIMEOUT=8;ur.HTTP_ERROR=6;ya.COMPLETE="complete";va.EventType=an;an.OPEN="a";an.CLOSE="b";an.ERROR="c";an.MESSAGE="d";K.prototype.listen=K.prototype.N;F.prototype.listenOnce=F.prototype.O;F.prototype.getLastError=F.prototype.La;F.prototype.getLastErrorCode=F.prototype.Da;F.prototype.getStatus=F.prototype.ba;F.prototype.getResponseJson=F.prototype.Qa;F.prototype.getResponseText=F.prototype.ga;F.prototype.send=F.prototype.ea;var sm=function(){return new Un},im=function(){return lr()},Ur=ur,om=ya,am=We,Gi={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lm=cn,En=va,um=F;const Wi="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He=new zo("@firebase/firestore");function Xi(){return He.logLevel}function w(t,...e){if(He.logLevel<=N.DEBUG){const n=e.map(Ws);He.debug(`Firestore (${At}): ${t}`,...n)}}function qe(t,...e){if(He.logLevel<=N.ERROR){const n=e.map(Ws);He.error(`Firestore (${At}): ${t}`,...n)}}function Qi(t,...e){if(He.logLevel<=N.WARN){const n=e.map(Ws);He.warn(`Firestore (${At}): ${t}`,...n)}}function Ws(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t="Unexpected state"){const e=`FIRESTORE (${At}) INTERNAL ASSERTION FAILED: `+t;throw qe(e),new Error(e)}function U(t,e){t||D()}function O(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(oe.UNAUTHENTICATED))}shutdown(){}}class dm{constructor(e){this.t=e,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Fe;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fe,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fe)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U(typeof r.accessToken=="string"),new cm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return U(e===null||typeof e=="string"),new oe(e)}}class fm{constructor(e,n,r){this.type="FirstParty",this.user=oe.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class pm{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new fm(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gm{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=i=>{i.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.p;return this.p=i.token,w("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?s(i):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(U(typeof n.token=="string"),this.p=n.token,new mm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ym(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function R(t,e){return t<e?-1:t>e?1:0}function ut(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return z.fromMillis(Date.now())}static fromDate(e){return z.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new z(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.timestamp=e}static fromTimestamp(e){return new B(e)}static min(){return new B(new z(0,0))}static max(){return new B(new z(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r){n===void 0?n=0:n>e.length&&D(),r===void 0?r=e.length-n:r>e.length-n&&D(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class M extends Gt{construct(e,n,r){return new M(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(p.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new M(n)}static emptyPath(){return new M([])}}const vm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ee extends Gt{construct(e,n,r){return new ee(e,n,r)}static isValidIdentifier(e){return vm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ee.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ee(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new T(p.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new T(p.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new T(p.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new T(p.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ee(n)}static emptyPath(){return new ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e){this.path=e}static fromPath(e){return new S(M.fromString(e))}static fromName(e){return new S(M.fromString(e).popFirst(5))}static empty(){return new S(M.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&M.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return M.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new S(new M(e.slice()))}}function wm(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=B.fromTimestamp(r===1e9?new z(n+1,0):new z(n,r));return new xe(s,S.empty(),e)}function bm(t){return new xe(t.readTime,t.key,-1)}class xe{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xe(B.min(),S.empty(),-1)}static max(){return new xe(B.max(),S.empty(),-1)}}function Em(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=S.comparator(t.documentKey,e.documentKey),n!==0?n:R(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t){if(t.code!==p.FAILED_PRECONDITION||t.message!==Tm)throw t;w("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&D(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new d((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof d?n:d.resolve(n)}catch(n){return d.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):d.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):d.reject(n)}static resolve(e){return new d((n,r)=>{n(e)})}static reject(e){return new d((n,r)=>{r(e)})}static waitFor(e){return new d((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=d.resolve(!1);for(const r of e)n=n.next(s=>s?d.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new d((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new d((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function yr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function el(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Za.ot=-1;class ue{constructor(e,n){this.comparator=e,this.root=n||G.EMPTY}insert(e,n){return new ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,G.BLACK,null,null))}remove(e){return new ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,G.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tn(this.root,e,this.comparator,!0)}}class Tn{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class G{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:G.RED,this.left=s!=null?s:G.EMPTY,this.right=i!=null?i:G.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new G(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return G.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return G.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,G.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,G.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw D();const e=this.left.check();if(e!==this.right.check())throw D();return e+(this.isRed()?0:1)}}G.EMPTY=null,G.RED=!0,G.BLACK=!1;G.EMPTY=new class{constructor(){this.size=0}get key(){throw D()}get value(){throw D()}get color(){throw D()}get left(){throw D()}get right(){throw D()}copy(t,e,n,r,s){return this}insert(t,e,n){return new G(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.comparator=e,this.data=new ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ji(this.data.getIterator())}getIteratorFrom(e){return new Ji(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ie)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ie(this.comparator);return n.data=e,n}}class Ji{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.fields=e,e.sort(ee.comparator)}static empty(){return new ve([])}unionWith(e){let n=new ie(ee.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ve(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ut(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ce(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new Ce(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ce.EMPTY_BYTE_STRING=new Ce("");const Am=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ze(t){if(U(!!t),typeof t=="string"){let e=0;const n=Am.exec(t);if(U(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:W(t.seconds),nanos:W(t.nanos)}}function W(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wt(t){return typeof t=="string"?Ce.fromBase64String(t):Ce.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jn(t){const e=ze(t.mapValue.fields.__local_write_time__.timestampValue);return new z(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,r,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Xt{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xt("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xt&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){return t==null}function Hn(t){return t===0&&1/t==-1/0}function _m(t){return typeof t=="number"&&Number.isInteger(t)&&!Hn(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ct(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:km(t)?9007199254740991:10:D()}function we(t,e){if(t===e)return!0;const n=ct(t);if(n!==ct(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jn(t).isEqual(jn(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=ze(r.timestampValue),o=ze(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Wt(r.bytesValue).isEqual(Wt(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return W(r.geoPointValue.latitude)===W(s.geoPointValue.latitude)&&W(r.geoPointValue.longitude)===W(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return W(r.integerValue)===W(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=W(r.doubleValue),o=W(s.doubleValue);return i===o?Hn(i)===Hn(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ut(t.arrayValue.values||[],e.arrayValue.values||[],we);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(Yi(i)!==Yi(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!we(i[a],o[a])))return!1;return!0}(t,e);default:return D()}}function Qt(t,e){return(t.values||[]).find(n=>we(n,e))!==void 0}function ht(t,e){if(t===e)return 0;const n=ct(t),r=ct(e);if(n!==r)return R(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return R(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=W(s.integerValue||s.doubleValue),a=W(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Zi(t.timestampValue,e.timestampValue);case 4:return Zi(jn(t),jn(e));case 5:return R(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Wt(s),a=Wt(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=R(o[l],a[l]);if(c!==0)return c}return R(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=R(W(s.latitude),W(i.latitude));return o!==0?o:R(W(s.longitude),W(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=ht(o[l],a[l]);if(c)return c}return R(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===Sn.mapValue&&i===Sn.mapValue)return 0;if(s===Sn.mapValue)return 1;if(i===Sn.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=R(a[u],c[u]);if(h!==0)return h;const m=ht(o[a[u]],l[c[u]]);if(m!==0)return m}return R(a.length,c.length)}(t.mapValue,e.mapValue);default:throw D()}}function Zi(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return R(t,e);const n=ze(t),r=ze(e),s=R(n.seconds,r.seconds);return s!==0?s:R(n.nanos,r.nanos)}function nt(t){return ls(t)}function ls(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=ze(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,S.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=ls(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${ls(r.fields[a])}`;return i+"}"}(t.mapValue):D();var e,n}function us(t){return!!t&&"integerValue"in t}function Qs(t){return!!t&&"arrayValue"in t}function _n(t){return!!t&&"mapValue"in t}function $t(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$t(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$t(t.arrayValue.values[n]);return e}return Object.assign({},t)}function km(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.value=e}static empty(){return new pe({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_n(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$t(n)}setAll(e){let n=ee.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=$t(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_n(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return we(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_n(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fn(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new pe($t(this.value))}}function tl(t){const e=[];return fn(t.fields,(n,r)=>{const s=new ee([n]);if(_n(r)){const i=tl(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ve(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new de(e,0,B.min(),B.min(),pe.empty(),0)}static newFoundDocument(e,n,r){return new de(e,1,n,B.min(),r,0)}static newNoDocument(e,n){return new de(e,2,n,B.min(),pe.empty(),0)}static newUnknownDocument(e,n){return new de(e,3,n,B.min(),pe.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof de&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new de(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ut=null}}function eo(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Dm(t,e,n,r,s,i,o)}function Ys(t){const e=O(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+nt(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Xs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nt(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nt(r)).join(",")),e.ut=n}return e.ut}function xm(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${nt(r.value)}`;var r}).join(", ")}]`),Xs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>nt(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>nt(n)).join(",")),`Target(${e})`}function Js(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!Fm(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!we(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!no(t.startAt,e.startAt)&&no(t.endAt,e.endAt)}class ae extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new Nm(e,n,r):n==="array-contains"?new $m(e,r):n==="in"?new Pm(e,r):n==="not-in"?new Mm(e,r):n==="array-contains-any"?new Lm(e,r):new ae(e,n,r)}static ct(e,n,r){return n==="in"?new Rm(e,r):new Om(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(ht(n,this.value)):n!==null&&ct(this.value)===ct(n)&&this.at(ht(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return D()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Nm extends ae{constructor(e,n,r){super(e,n,r),this.key=S.fromName(r.referenceValue)}matches(e){const n=S.comparator(e.key,this.key);return this.at(n)}}class Rm extends ae{constructor(e,n){super(e,"in",n),this.keys=nl("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Om extends ae{constructor(e,n){super(e,"not-in",n),this.keys=nl("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nl(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>S.fromName(r.referenceValue))}class $m extends ae{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qs(n)&&Qt(n.arrayValue,this.value)}}class Pm extends ae{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qt(this.value.arrayValue,n)}}class Mm extends ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qt(this.value.arrayValue,n)}}class Lm extends ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qs(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qt(this.value.arrayValue,r))}}class qn{constructor(e,n){this.position=e,this.inclusive=n}}class Pt{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fm(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function to(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=S.comparator(S.fromName(o.referenceValue),n.key):r=ht(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function no(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!we(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.lt=null,this.ft=null,this.startAt,this.endAt}}function Bm(t,e,n,r,s,i,o,a){return new vr(t,e,n,r,s,i,o,a)}function Vm(t){return new vr(t)}function ro(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Um(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function jm(t){for(const e of t.filters)if(e.ht())return e.field;return null}function Hm(t){return t.collectionGroup!==null}function Yt(t){const e=O(t);if(e.lt===null){e.lt=[];const n=jm(e),r=Um(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new Pt(n)),e.lt.push(new Pt(ee.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.lt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Pt(ee.keyField(),i))}}}return e.lt}function dt(t){const e=O(t);if(!e.ft)if(e.limitType==="F")e.ft=eo(e.path,e.collectionGroup,Yt(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Yt(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Pt(i.field,o))}const r=e.endAt?new qn(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new qn(e.startAt.position,e.startAt.inclusive):null;e.ft=eo(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.ft}function cs(t,e,n){return new vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rl(t,e){return Js(dt(t),dt(e))&&t.limitType===e.limitType}function sl(t){return`${Ys(dt(t))}|lt:${t.limitType}`}function so(t){return`Query(target=${xm(dt(t))}; limitType=${t.limitType})`}function il(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):S.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=to(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Yt(n),r)||n.endAt&&!function(s,i,o){const a=to(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Yt(n),r))}(t,e)}function qm(t){return(e,n)=>{let r=!1;for(const s of Yt(t)){const i=zm(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zm(t,e,n){const r=t.field.isKeyField()?S.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?ht(a,l):D()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return D()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hn(e)?"-0":e}}function al(t){return{integerValue:""+t}}function Km(t,e){return _m(e)?al(e):ol(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this._=void 0}}function Gm(t,e,n){return t instanceof zn?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Jt?ul(t,e):t instanceof Zt?cl(t,e):function(r,s){const i=ll(r,s),o=io(i)+io(r._t);return us(i)&&us(r._t)?al(o):ol(r.wt,o)}(t,e)}function Wm(t,e,n){return t instanceof Jt?ul(t,e):t instanceof Zt?cl(t,e):n}function ll(t,e){return t instanceof Kn?us(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class zn extends wr{}class Jt extends wr{constructor(e){super(),this.elements=e}}function ul(t,e){const n=hl(e);for(const r of t.elements)n.some(s=>we(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zt extends wr{constructor(e){super(),this.elements=e}}function cl(t,e){let n=hl(e);for(const r of t.elements)n=n.filter(s=>!we(s,r));return{arrayValue:{values:n}}}class Kn extends wr{constructor(e,n){super(),this.wt=e,this._t=n}}function io(t){return W(t.integerValue||t.doubleValue)}function hl(t){return Qs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xm(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Jt&&r instanceof Jt||n instanceof Zt&&r instanceof Zt?ut(n.elements,r.elements,we):n instanceof Kn&&r instanceof Kn?we(n._t,r._t):n instanceof zn&&r instanceof zn}(t.transform,e.transform)}class Qm{constructor(e,n){this.version=e,this.transformResults=n}}class Te{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Te}static exists(e){return new Te(void 0,e)}static updateTime(e){return new Te(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kn(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class br{}function dl(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pl(t.key,Te.none()):new pn(t.key,t.data,Te.none());{const n=t.data,r=pe.empty();let s=new ie(ee.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Xe(t.key,r,new ve(s.toArray()),Te.none())}}function Ym(t,e,n){t instanceof pn?function(r,s,i){const o=r.value.clone(),a=ao(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Xe?function(r,s,i){if(!kn(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=ao(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(fl(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Mt(t,e,n,r){return t instanceof pn?function(s,i,o,a){if(!kn(s.precondition,i))return o;const l=s.value.clone(),c=lo(s.fieldTransforms,a,i);return l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xe?function(s,i,o,a){if(!kn(s.precondition,i))return o;const l=lo(s.fieldTransforms,a,i),c=i.data;return c.setAll(fl(s)),c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(s,i,o){return kn(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function Jm(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ll(r.transform,s||null);i!=null&&(n===null&&(n=pe.empty()),n.set(r.field,i))}return n||null}function oo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ut(n,r,(s,i)=>Xm(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pn extends br{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xe extends br{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fl(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ao(t,e,n){const r=new Map;U(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Wm(o,a,n[s]))}return r}function lo(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Gm(i,o,e))}return r}class pl extends br{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zm extends br{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L,_;function eg(t){switch(t){default:return D();case p.CANCELLED:case p.UNKNOWN:case p.DEADLINE_EXCEEDED:case p.RESOURCE_EXHAUSTED:case p.INTERNAL:case p.UNAVAILABLE:case p.UNAUTHENTICATED:return!1;case p.INVALID_ARGUMENT:case p.NOT_FOUND:case p.ALREADY_EXISTS:case p.PERMISSION_DENIED:case p.FAILED_PRECONDITION:case p.ABORTED:case p.OUT_OF_RANGE:case p.UNIMPLEMENTED:case p.DATA_LOSS:return!0}}function tg(t){if(t===void 0)return qe("GRPC error has no .code"),p.UNKNOWN;switch(t){case L.OK:return p.OK;case L.CANCELLED:return p.CANCELLED;case L.UNKNOWN:return p.UNKNOWN;case L.DEADLINE_EXCEEDED:return p.DEADLINE_EXCEEDED;case L.RESOURCE_EXHAUSTED:return p.RESOURCE_EXHAUSTED;case L.INTERNAL:return p.INTERNAL;case L.UNAVAILABLE:return p.UNAVAILABLE;case L.UNAUTHENTICATED:return p.UNAUTHENTICATED;case L.INVALID_ARGUMENT:return p.INVALID_ARGUMENT;case L.NOT_FOUND:return p.NOT_FOUND;case L.ALREADY_EXISTS:return p.ALREADY_EXISTS;case L.PERMISSION_DENIED:return p.PERMISSION_DENIED;case L.FAILED_PRECONDITION:return p.FAILED_PRECONDITION;case L.ABORTED:return p.ABORTED;case L.OUT_OF_RANGE:return p.OUT_OF_RANGE;case L.UNIMPLEMENTED:return p.UNIMPLEMENTED;case L.DATA_LOSS:return p.DATA_LOSS;default:return D()}}(_=L||(L={}))[_.OK=0]="OK",_[_.CANCELLED=1]="CANCELLED",_[_.UNKNOWN=2]="UNKNOWN",_[_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_[_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_[_.NOT_FOUND=5]="NOT_FOUND",_[_.ALREADY_EXISTS=6]="ALREADY_EXISTS",_[_.PERMISSION_DENIED=7]="PERMISSION_DENIED",_[_.UNAUTHENTICATED=16]="UNAUTHENTICATED",_[_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_[_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_[_.ABORTED=10]="ABORTED",_[_.OUT_OF_RANGE=11]="OUT_OF_RANGE",_[_.UNIMPLEMENTED=12]="UNIMPLEMENTED",_[_.INTERNAL=13]="INTERNAL",_[_.UNAVAILABLE=14]="UNAVAILABLE",_[_.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fn(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return el(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=new ue(S.comparator);function Gn(){return ng}const ml=new ue(S.comparator);function An(...t){let e=ml;for(const n of t)e=e.insert(n.key,n);return e}function gl(t){let e=ml;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Le(){return Lt()}function yl(){return Lt()}function Lt(){return new Ct(t=>t.toString(),(t,e)=>t.isEqual(e))}const rg=new ue(S.comparator),sg=new ie(S.comparator);function Z(...t){let e=sg;for(const n of t)e=e.add(n);return e}const ig=new ie(R);function og(){return ig}class ag{constructor(e,n){this.databaseId=e,this.dt=n}}function hs(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lg(t,e){return t.dt?e.toBase64():e.toUint8Array()}function ug(t,e){return hs(t,e.toTimestamp())}function rt(t){return U(!!t),B.fromTimestamp(function(e){const n=ze(e);return new z(n.seconds,n.nanos)}(t))}function vl(t,e){return function(n){return new M(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function cg(t){const e=M.fromString(t);return U(bg(e)),e}function ds(t,e){return vl(t.databaseId,e.path)}function hg(t){const e=cg(t);return e.length===4?M.emptyPath():fg(e)}function dg(t){return new M(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fg(t){return U(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uo(t,e,n){return{name:ds(t,e),fields:n.value.mapValue.fields}}function pg(t,e){let n;if(e instanceof pn)n={update:uo(t,e.key,e.value)};else if(e instanceof pl)n={delete:ds(t,e.key)};else if(e instanceof Xe)n={update:uo(t,e.key,e.data),updateMask:wg(e.fieldMask)};else{if(!(e instanceof Zm))return D();n={verify:ds(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof zn)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Jt)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Zt)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Kn)return{fieldPath:i.field.canonicalString(),increment:o._t};throw D()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:ug(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:D()}(t,e.precondition)),n}function mg(t,e){return t&&t.length>0?(U(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?rt(r.updateTime):rt(s);return i.isEqual(B.min())&&(i=rt(s)),new Qm(i,r.transformResults||[])}(n,e))):[]}function gg(t){let e=hg(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){U(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=wl(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new Pt(et(h.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Xs(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,m=u.values||[];return new qn(m,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,m=u.values||[];return new qn(m,h)}(n.endAt)),Bm(e,s,o,i,a,"F",l,c)}function wl(t){return t?t.unaryFilter!==void 0?[vg(t)]:t.fieldFilter!==void 0?[yg(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>wl(e)).reduce((e,n)=>e.concat(n)):D():[]}function et(t){return ee.fromServerFormat(t.fieldPath)}function yg(t){return ae.create(et(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return D()}}(t.fieldFilter.op),t.fieldFilter.value)}function vg(t){switch(t.unaryFilter.op){case"IS_NAN":const e=et(t.unaryFilter.field);return ae.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=et(t.unaryFilter.field);return ae.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=et(t.unaryFilter.field);return ae.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=et(t.unaryFilter.field);return ae.create(s,"!=",{nullValue:"NULL_VALUE"});default:return D()}}function wg(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bg(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Ym(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mt(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mt(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yl();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=dl(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(B.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&ut(this.mutations,e.mutations,(n,r)=>oo(n,r))&&ut(this.baseMutations,e.baseMutations,(n,r)=>oo(n,r))}}class Zs{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){U(e.mutations.length===r.length);let s=rg;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Zs(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this.ne=e}}function Ag(t){const e=gg({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cs(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.ze=new Ig}addToCollectionParentIndex(e,n){return this.ze.add(n),d.resolve()}getCollectionParents(e,n){return d.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return d.resolve()}deleteFieldIndex(e,n){return d.resolve()}getDocumentsMatchingTarget(e,n){return d.resolve(null)}getIndexType(e,n){return d.resolve(0)}getFieldIndexes(e,n){return d.resolve([])}getNextCollectionGroupToUpdate(e){return d.resolve(null)}getMinOffset(e,n){return d.resolve(xe.min())}getMinOffsetFromCollectionGroup(e,n){return d.resolve(xe.min())}updateCollectionGroup(e,n,r){return d.resolve()}updateIndexEntries(e,n){return d.resolve()}}class Ig{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ie(M.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ie(M.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ft(0)}static Rn(){return new ft(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.changes=new Ct(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,de.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?d.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&Mt(r.mutation,s,ve.empty(),z.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){const s=Le();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=An();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Le();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Gn();const o=Lt(),a=Lt();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Xe)?i=i.insert(c.key,c):u!==void 0&&(o.set(c.key,u.mutation.getFieldMask()),Mt(u.mutation,c,u.mutation.getFieldMask(),z.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new kg(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Lt();let s=new ue((o,a)=>o-a),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ve.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||Z()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=yl();u.forEach(m=>{if(!i.has(m)){const v=dl(n.get(m),r.get(m));v!==null&&h.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return d.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return S.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):d.resolve(Le());let a=-1,l=i;return o.next(c=>d.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?d.resolve():this.getBaseDocument(e,u,h).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Z())).next(u=>({batchId:a,changes:gl(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new S(n)).next(r=>{let s=An();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=An();return this.indexManager.getCollectionParents(e,s).next(o=>d.forEach(o,a=>{const l=function(c,u){return new vr(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,h)=>{i=i.insert(u,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,de.newInvalidDocument(c)))});let o=An();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&Mt(c.mutation,l,ve.empty(),z.now()),il(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):d.resolve(de.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return d.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:rt(r.createTime)}),d.resolve()}getNamedQuery(e,n){return d.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:Ag(r.bundledQuery),readTime:rt(r.readTime)}}(n)),d.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.overlays=new ue(S.comparator),this.Xn=new Map}getOverlay(e,n){return d.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Le();return d.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ie(e,n,i)}),d.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Xn.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Xn.delete(r)),d.resolve()}getOverlaysForCollection(e,n,r){const s=Le(),i=n.length+1,o=new S(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return d.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ue((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Le(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Le(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return d.resolve(a)}ie(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tg(n,r));let i=this.Xn.get(n);i===void 0&&(i=Z(),this.Xn.set(n,i)),this.Xn.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.Zn=new ie(q.ts),this.es=new ie(q.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new q(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new q(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new S(new M([])),r=new q(n,e),s=new q(n,e+1),i=[];return this.es.forEachInRange([r,s],o=>{this.rs(o),i.push(o.key)}),i}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new S(new M([])),r=new q(n,e),s=new q(n,e+1);let i=Z();return this.es.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new q(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class q{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return S.comparator(e.key,n.key)||R(e.ls,n.ls)}static ns(e,n){return R(e.ls,n.ls)||S.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new ie(q.ts)}checkEmpty(e){return d.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Eg(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.ds=this.ds.add(new q(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return d.resolve(o)}lookupMutationBatch(e,n){return d.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ws(r),i=s<0?0:s;return d.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return d.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return d.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new q(n,0),s=new q(n,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([r,s],o=>{const a=this._s(o.ls);i.push(a)}),d.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ie(R);return n.forEach(s=>{const i=new q(s,0),o=new q(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([i,o],a=>{r=r.add(a.ls)})}),d.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;S.isDocumentKey(i)||(i=i.child(""));const o=new q(new S(i),0);let a=new ie(R);return this.ds.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.ls)),!0)},o),d.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const s=this._s(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){U(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return d.forEach(n.mutations,s=>{const i=new q(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new q(n,0),s=this.ds.firstAfterOrEqual(r);return d.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,d.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this.ps=e,this.docs=new ue(S.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return d.resolve(r?r.document.mutableCopy():de.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():de.newInvalidDocument(s))}),d.resolve(r)}getAllFromCollection(e,n,r){let s=Gn();const i=new S(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Em(bm(l),r)<=0||(s=s.insert(l.key,l.mutableCopy()))}return d.resolve(s)}getAllFromCollectionGroup(e,n,r,s){D()}Is(e,n){return d.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $g(this)}getSize(e){return d.resolve(this.size)}}class $g extends _g{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),d.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this.persistence=e,this.Ts=new Ct(n=>Ys(n),Js),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Es=0,this.As=new ei,this.targetCount=0,this.Rs=ft.An()}forEachTarget(e,n){return this.Ts.forEach((r,s)=>n(s)),d.resolve()}getLastRemoteSnapshotVersion(e){return d.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return d.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),d.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),d.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new ft(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,d.resolve()}updateTargetData(e,n){return this.vn(n),d.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,d.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Ts.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),d.waitFor(i).next(()=>s)}getTargetCount(e){return d.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return d.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),d.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),d.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),d.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return d.resolve(r)}containsKey(e,n){return d.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.bs={},this.overlays={},this.Ps=new Za(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Pg(this),this.indexManager=new Cg,this.remoteDocumentCache=function(r){return new Og(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new Sg(n),this.Ds=new xg(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ng,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new Rg(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){w("MemoryPersistence","Starting transaction:",e);const s=new Lg(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(i=>this.referenceDelegate.xs(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ns(e,n){return d.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class Lg extends Sm{constructor(e){super(),this.currentSequenceNumber=e}}class ti{constructor(e){this.persistence=e,this.ks=new ei,this.Ms=null}static Os(e){return new ti(e)}get Fs(){if(this.Ms)return this.Ms;throw D()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),d.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),d.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),d.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Fs.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return d.forEach(this.Fs,r=>{const s=S.fromPath(r);return this.$s(e,s).next(i=>{i||n.removeEntry(s,B.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return d.or([()=>d.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=s}static Vi(e,n){let r=Z(),s=Z();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ni(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ci(e,n).next(i=>i||this.xi(e,n,s,r)).next(i=>i||this.Ni(e,n))}Ci(e,n){if(ro(n))return d.resolve(null);let r=dt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=cs(n,null,"F"),r=dt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Z(...i);return this.Di.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ki(n,a);return this.Mi(n,c,o,l.readTime)?this.Ci(e,cs(n,null,"F")):this.Oi(e,c,n,l)}))})))}xi(e,n,r,s){return ro(n)||s.isEqual(B.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(i=>{const o=this.ki(n,i);return this.Mi(n,o,r,s)?this.Ni(e,n):(Xi()<=N.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),so(n)),this.Oi(e,o,n,wm(s,-1)))})}ki(e,n){let r=new ie(qm(e));return n.forEach((s,i)=>{il(e,i)&&(r=r.add(i))}),r}Mi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ni(e,n){return Xi()<=N.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",so(n)),this.Di.getDocumentsMatchingQuery(e,n,xe.min())}Oi(e,n,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,r,s){this.persistence=e,this.Fi=n,this.wt=s,this.$i=new ue(R),this.Bi=new Ct(i=>Ys(i),Js),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dg(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function Vg(t,e,n,r){return new Bg(t,e,n,r)}async function bl(t,e){const n=O(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Z();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ki:c,removedBatchIds:o,addedBatchIds:a}))})})}function Ug(t,e){const n=O(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let m=d.resolve();return h.forEach(v=>{m=m.next(()=>c.getEntry(a,v)).next(A=>{const x=l.docVersions.get(v);U(x!==null),A.version.compareTo(x)<0&&(u.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),c.addEntry(A)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Z();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function jg(t){const e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function Hg(t,e){const n=O(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class co{constructor(){this.activeTargetIds=og()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qg{constructor(){this.Fr=new co,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new co,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,s,i){const o=this.oo(e,n);w("RestConnection","Sending: ",o,r);const a={};return this.uo(a,s,i),this.co(e,o,a,r).then(l=>(w("RestConnection","Received: ",l),l),l=>{throw Qi("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}ao(e,n,r,s,i,o){return this.ro(e,n,r,s,i)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+At,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}oo(e,n){const r=Kg[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,s){return new Promise((i,o)=>{const a=new um;a.listenOnce(om.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ur.NO_ERROR:const c=a.getResponseJson();w("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Ur.TIMEOUT:w("Connection",'RPC "'+e+'" timed out'),o(new T(p.DEADLINE_EXCEEDED,"Request time out"));break;case Ur.HTTP_ERROR:const u=a.getStatus();if(w("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const m=function(v){const A=v.toLowerCase().replace(/_/g,"-");return Object.values(p).indexOf(A)>=0?A:p.UNKNOWN}(h.status);o(new T(m,h.message))}else o(new T(p.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new T(p.UNAVAILABLE,"Connection failed."));break;default:D()}}finally{w("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,r,15)})}ho(e,n,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=sm(),o=im(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new lm({})),this.uo(a.initMessageHeaders,n,r),Md()||Fd()||Bd()||Vd()||Ud()||Ld()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=s.join("");w("Connection","Creating WebChannel: "+l,a);const c=i.createWebChannel(l,a);let u=!1,h=!1;const m=new Gg({jr:A=>{h?w("Connection","Not sending because WebChannel is closed:",A):(u||(w("Connection","Opening WebChannel transport."),c.open(),u=!0),w("Connection","WebChannel sending:",A),c.send(A))},Wr:()=>c.close()}),v=(A,x,C)=>{A.listen(x,I=>{try{C(I)}catch(P){setTimeout(()=>{throw P},0)}})};return v(c,En.EventType.OPEN,()=>{h||w("Connection","WebChannel transport opened.")}),v(c,En.EventType.CLOSE,()=>{h||(h=!0,w("Connection","WebChannel transport closed"),m.eo())}),v(c,En.EventType.ERROR,A=>{h||(h=!0,Qi("Connection","WebChannel transport errored:",A),m.eo(new T(p.UNAVAILABLE,"The operation could not be completed")))}),v(c,En.EventType.MESSAGE,A=>{var x;if(!h){const C=A.data[0];U(!!C);const I=C,P=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(P){w("Connection","WebChannel received error:",P);const me=P.status;let _t=function(jl){const li=L[jl];if(li!==void 0)return tg(li)}(me),Qe=P.message;_t===void 0&&(_t=p.INTERNAL,Qe="Unknown error status: "+me+" with message "+P.message),h=!0,m.eo(new T(_t,Qe)),c.close()}else w("Connection","WebChannel received:",C),m.no(C)}}),v(o,am.STAT_EVENT,A=>{A.stat===Gi.PROXY?w("Connection","Detected buffering proxy"):A.stat===Gi.NOPROXY&&w("Connection","Detected no buffering proxy")}),setTimeout(()=>{m.Zr()},0),m}}function jr(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){return new ag(t,!0)}class El{constructor(e,n,r=1e3,s=1.5,i=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=s,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,n-r);s>0&&w("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,s,i,o,a,l){this.js=e,this.Ao=r,this.Ro=s,this.bo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new El(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===p.RESOURCE_EXHAUSTED?(qe(n.toString()),qe("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===p.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===n&&this.Uo(r,s)},r=>{e(()=>{const s=new T(p.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qg extends Xg{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(U(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=mg(e.writeResults,e.commitTime),r=rt(e.commitTime);return this.listener.Jo(r,n)}return U(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=dg(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pg(this.wt,r))};this.Oo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new T(p.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.bo.ro(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(p.UNKNOWN,s.toString())})}ao(e,n,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ao(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(p.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class Jg{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(qe(n),this.su=!1):w("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br(o=>{r.enqueueAndForget(async()=>{gn(this)&&(w("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=O(a);l.lu.add(4),await mn(l),l._u.set("Unknown"),l.lu.delete(4),await Tr(l)}(this))})}),this._u=new Jg(r,s)}}async function Tr(t){if(gn(t))for(const e of t.fu)await e(!0)}async function mn(t){for(const e of t.fu)await e(!1)}function gn(t){return O(t).lu.size===0}async function Tl(t,e,n){if(!yr(e))throw e;t.lu.add(1),await mn(t),t._u.set("Offline"),n||(n=()=>jg(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{w("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await Tr(t)})}function Sl(t,e){return e().catch(n=>Tl(t,n,e))}async function Sr(t){const e=O(t),n=Ne(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;ey(e);)try{const s=await Hg(e.localStore,r);if(s===null){e.au.length===0&&n.ko();break}r=s.batchId,ty(e,s)}catch(s){await Tl(e,s)}Al(e)&&Cl(e)}function ey(t){return gn(t)&&t.au.length<10}function ty(t,e){t.au.push(e);const n=Ne(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function Al(t){return gn(t)&&!Ne(t).Do()&&t.au.length>0}function Cl(t){Ne(t).start()}async function ny(t){Ne(t).Xo()}async function ry(t){const e=Ne(t);for(const n of t.au)e.Ho(n.mutations)}async function sy(t,e,n){const r=t.au.shift(),s=Zs.from(r,e,n);await Sl(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sr(t)}async function iy(t,e){e&&Ne(t).zo&&await async function(n,r){if(s=r.code,eg(s)&&s!==p.ABORTED){const i=n.au.shift();Ne(n).No(),await Sl(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Sr(n)}var s}(t,e),Al(t)&&Cl(t)}async function fo(t,e){const n=O(t);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");const r=gn(n);n.lu.add(3),await mn(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await Tr(n)}async function oy(t,e){const n=O(t);e?(n.lu.delete(2),await Tr(n)):e||(n.lu.add(2),await mn(n),n._u.set("Unknown"))}function Ne(t){return t.gu||(t.gu=function(e,n,r){const s=O(e);return s.tu(),new Qg(n,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(t.datastore,t.asyncQueue,{zr:ny.bind(null,t),Jr:iy.bind(null,t),Yo:ry.bind(null,t),Jo:sy.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await Sr(t)):(await t.gu.stop(),t.au.length>0&&(w("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ri(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(p.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Il(t,e){if(qe("AsyncQueue",`${e}: ${t}`),yr(t))return new T(p.UNAVAILABLE,`${e}: ${t}`);throw t}class ay{constructor(){this.queries=new Ct(e=>sl(e),rl),this.onlineState="Unknown",this.Tu=new Set}}function ly(t){t.Tu.forEach(e=>{e.next()})}class uy{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Ct(a=>sl(a),rl),this.ec=new Map,this.nc=new Set,this.sc=new ue(S.comparator),this.ic=new Map,this.rc=new ei,this.oc={},this.uc=new Map,this.cc=ft.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function cy(t,e,n){const r=py(t);try{const s=await function(i,o){const a=O(i),l=z.now(),c=o.reduce((m,v)=>m.add(v.key),Z());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Gn(),A=Z();return a.Ui.getEntries(m,c).next(x=>{v=x,v.forEach((C,I)=>{I.isValidDocument()||(A=A.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,v)).next(x=>{u=x;const C=[];for(const I of o){const P=Jm(I,u.get(I.key).overlayedDocument);P!=null&&C.push(new Xe(I.key,P,tl(P.value.mapValue),Te.exists(!0)))}return a.mutationQueue.addMutationBatch(m,l,C,o)}).next(x=>{h=x;const C=x.applyToLocalDocumentSet(u,A);return a.documentOverlayCache.saveOverlays(m,x.batchId,C)})}).then(()=>({batchId:h.batchId,changes:gl(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.oc[i.currentUser.toKey()];l||(l=new ue(R)),l=l.insert(o,a),i.oc[i.currentUser.toKey()]=l}(r,s.batchId,n),await Ar(r,s.changes),await Sr(r.remoteStore)}catch(s){const i=Il(s,"Failed to persist write");n.reject(i)}}function po(t,e,n){const r=O(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.tc.forEach((i,o)=>{const a=o.view.Eu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=O(i);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.Eu(o)&&(l=!0)}),l&&ly(a)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hy(t,e){const n=O(t),r=e.batch.batchId;try{const s=await Ug(n.localStore,e);kl(n,r,null),_l(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ar(n,s)}catch(s){await Ja(s)}}async function dy(t,e,n){const r=O(t);try{const s=await function(i,o){const a=O(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(U(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);kl(r,e,n),_l(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ar(r,s)}catch(s){await Ja(s)}}function _l(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function kl(t,e,n){const r=O(t);let s=r.oc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}async function Ar(t,e,n){const r=O(t),s=[],i=[],o=[];r.tc.isEmpty()||(r.tc.forEach((a,l)=>{o.push(r.hc(l,e,n).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),s.push(c);const u=ni.Vi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Zu.Go(s),await async function(a,l){const c=O(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>d.forEach(l,h=>d.forEach(h.Pi,m=>c.persistence.referenceDelegate.addReference(u,h.targetId,m)).next(()=>d.forEach(h.vi,m=>c.persistence.referenceDelegate.removeReference(u,h.targetId,m)))))}catch(u){if(!yr(u))throw u;w("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const m=c.$i.get(h),v=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(v);c.$i=c.$i.insert(h,A)}}}(r.localStore,i))}async function fy(t,e){const n=O(t);if(!n.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());const r=await bl(n.localStore,e);n.currentUser=e,function(s,i){s.uc.forEach(o=>{o.forEach(a=>{a.reject(new T(p.CANCELLED,i))})}),s.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ar(n,r.Ki)}}function py(t){const e=O(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dy.bind(null,e),e}class my{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=Er(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return Vg(this.persistence,new Fg,e.initialUser,this.wt)}_c(e){return new Mg(ti.Os,this.wt)}dc(e){return new qg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class gy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>po(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fy.bind(null,this.syncEngine),await oy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ay}createDatastore(e){const n=Er(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new Wg(s));var s;return function(i,o,a,l){return new Yg(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>po(this.syncEngine,a,0),o=ho.V()?new ho:new zg,new Zg(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,c){const u=new uy(r,s,i,o,a,l);return c&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=O(e);w("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await mn(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=oe.UNAUTHENTICATED,this.clientId=Ya.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{w("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(w("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(p.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Il(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vy(t,e){t.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bl(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await by(t);w("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>fo(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>fo(e.remoteStore,i)),t.onlineComponents=e}async function by(t){return t.offlineComponents||(w("FirestoreClient","Using default OfflineComponentProvider"),await vy(t,new my)),t.offlineComponents}async function Ey(t){return t.onlineComponents||(w("FirestoreClient","Using default OnlineComponentProvider"),await wy(t,new gy)),t.onlineComponents}function Ty(t){return Ey(t).then(e=>e.syncEngine)}const mo=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e,n){if(!n)throw new T(p.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Sy(t,e,n,r){if(e===!0&&r===!0)throw new T(p.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function go(t){if(!S.isDocumentKey(t))throw new T(p.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yo(t){if(S.isDocumentKey(t))throw new T(p.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function si(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":D()}function Ay(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(p.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=si(t);throw new T(p.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new T(p.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(p.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Sy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vo({}),this._settingsFrozen=!1,e instanceof Xt?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new T(p.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xt(s.options.projectId)}(e))}get app(){if(!this._app)throw new T(p.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(p.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vo(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new hm;switch(n.type){case"gapi":const r=n.client;return U(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new pm(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new T(p.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=mo.get(e);n&&(w("ComponentProvider","Removing Datastore"),mo.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ke(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Se(this.firestore,e,this._key)}}class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class ke extends oi{constructor(e,n,r){super(e,n,Vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new S(e))}withConverter(e){return new ke(this.firestore,e,this._path)}}function Cy(t,e,...n){if(t=Bt(t),Dl("collection","path",e),t instanceof ii){const r=M.fromString(e,...n);return yo(r),new ke(t,null,r)}{if(!(t instanceof Se||t instanceof ke))throw new T(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(M.fromString(e,...n));return yo(r),new ke(t.firestore,null,r)}}function Iy(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=Ya.I()),Dl("doc","path",e),t instanceof ii){const r=M.fromString(e,...n);return go(r),new Se(t,null,new S(r))}{if(!(t instanceof Se||t instanceof ke))throw new T(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(M.fromString(e,...n));return go(r),new Se(t.firestore,t instanceof ke?t.converter:null,new S(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new El(this,"async_queue_retry"),this.Kc=()=>{const n=jr();n&&w("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=jr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=jr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new Fe;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(e){if(!yr(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw qe("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const s=ri.createAndSchedule(this,e,n,r,i=>this.Wc(i));return this.$c.push(s),s}Gc(){this.Bc&&D()}verifyOperationInProgress(){}async zc(){let e;do e=this.Mc,await e;while(e!==this.Mc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}class xl extends ii{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new _y,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Nl(this),this._firestoreClient.terminate()}}function ky(t=Gf()){return jf(t,"firestore").getImmediate()}function Dy(t){return t._firestoreClient||Nl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Nl(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new Im(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new yy(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new T(p.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ee(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._byteString=e}static fromBase64String(e){try{return new en(Ce.fromBase64String(e))}catch(n){throw new T(p.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new en(Ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(p.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(p.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=/^__.*__$/;class Ny{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xe(e,this.data,this.fieldMask,n,this.fieldTransforms):new pn(e,this.data,n,this.fieldTransforms)}}function Pl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D()}}class ai{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new ai(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Wn(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(Pl(this.Zc)&&xy.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Ry{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||Er(e)}aa(e,n,r,s=!1){return new ai({Zc:e,methodName:n,ca:r,path:ee.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Oy(t){const e=t._freezeSettings(),n=Er(t._databaseId);return new Ry(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $y(t,e,n,r,s,i={}){const o=t.aa(i.merge||i.mergeFields?2:0,e,n,s);Bl("Data must be an object, but it was:",o,r);const a=Ll(r,o);let l,c;if(i.merge)l=new ve(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const m=Py(e,h,n);if(!o.contains(m))throw new T(p.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Fy(u,m)||u.push(m)}l=new ve(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Ny(new pe(a),l,c)}function Ml(t,e){if(Fl(t=Bt(t)))return Bl("Unsupported field value:",e,t),Ll(t,e);if(t instanceof Ol)return function(n,r){if(!Pl(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=Ml(o,r.ra(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=Bt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Km(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=z.fromDate(n);return{timestampValue:hs(r.wt,s)}}if(n instanceof z){const s=new z(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:hs(r.wt,s)}}if(n instanceof $l)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof en)return{bytesValue:lg(r.wt,n._byteString)};if(n instanceof Se){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.oa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${si(n)}`)}(t,e)}function Ll(t,e){const n={};return el(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fn(t,(r,s)=>{const i=Ml(s,e.ea(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Fl(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof z||t instanceof $l||t instanceof en||t instanceof Se||t instanceof Ol)}function Bl(t,e,n){if(!Fl(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=si(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function Py(t,e,n){if((e=Bt(e))instanceof Rl)return e._internalPath;if(typeof e=="string")return Ly(t,e);throw Wn("Field path arguments must be of type string or ",t,!1,void 0,n)}const My=new RegExp("[~\\*/\\[\\]]");function Ly(t,e,n){if(e.search(My)>=0)throw Wn(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rl(...e.split("."))._internalPath}catch{throw Wn(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wn(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new T(p.INVALID_ARGUMENT,a+t+l)}function Fy(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Vy(t,e){const n=Ay(t.firestore,xl),r=Iy(t),s=By(t.converter,e);return Uy(n,[$y(Oy(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Te.exists(!1))]).then(()=>r)}function Uy(t,e){return function(n,r){const s=new Fe;return n.asyncQueue.enqueueAndForget(async()=>cy(await Ty(n),r,s)),s.promise}(Dy(t),e)}(function(t,e=!0){(function(n){At=n})(zf),Rn(new Vt("firestore",(n,{options:r})=>{const s=n.getProvider("app").getImmediate(),i=new xl(s,new dm(n.getProvider("auth-internal")),new gm(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),i._setSettings(r),i},"PUBLIC")),tt(Wi,"3.4.14",t),tt(Wi,"3.4.14","esm2017")})();var jy="firebase",Hy="9.9.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tt(jy,Hy,"app");const qy={apiKey:"AIzaSyA4z7iojD9k9VOG81xJrGdgzHr4-wyGAko",authDomain:"asistencia-casamiento.firebaseapp.com",projectId:"asistencia-casamiento",storageBucket:"asistencia-casamiento.appspot.com",messagingSenderId:"13406005698",appId:"1:13406005698:web:6942fcb12fdbec2ff90e5b"},Vl=Kf(qy),Ul=ky(Vl);window.app=Vl;window.firestore=Ul;const It=t=>(Qn("data-v-3bd25f46"),t=t(),Yn(),t),zy={class:"w-full xl:bg-slate-100 pt-5"},Ky={class:"container-section xl:bg-slate-100"},Gy={class:"text-center"},Wy={class:"input-wrapper","data-aos":"zoom-in"},Xy=It(()=>f("label",{class:"w-full",for:"Nama"},"Nama",-1)),Qy={class:"input-wrapper","data-aos":"zoom-in"},Yy=It(()=>f("label",{class:"w-full",for:"Kehadiran"},"Kehadiran",-1)),Jy=It(()=>f("option",{value:"Hadir"},"Hadir",-1)),Zy=It(()=>f("option",{value:"Tidak Hadir"},"Tidak Hadir",-1)),ev=[Jy,Zy],tv={class:"input-wrapper","data-aos":"zoom-in"},nv=It(()=>f("label",{class:"w-full",for:"Pesan"},"Pesan",-1)),rv=["disabled"],sv={key:0,class:"fa fa-paper-plane mr-1"},iv={key:1,class:"fa fa-spinner fa-spin mr-1"},ov=mt(" Kirim Pesan "),av=It(()=>f("div",{class:"w-full text-center pb-12 mt-12"},[f("p",{class:"text-sm text-amber-600 font-medium"},"Harjonan \xA9 2024")],-1)),lv={setup(t){const e=j(null),n=j(null),r=j(null);var s=j("Hadir");const i=j(new Date);var o=j([]);j(["Vegetariano","Kosher","Celiaco","Sin Sal","Menu Infantil (Menor a 5 a\xF1os)","Otro (Agregar en comentarios)"]);const a=j(!1),l=j(!1),c=j(!1),u=j(!1),h=()=>new Promise((x,C)=>{console.log("Sending 1");const I={Nama:n.value,Fecha:new Date,Kehadiran:s.value,Pesan:r.value,Dieta:o.value};Vy(Cy(Ul,"asistencia-casamiento"),I).then(P=>x(P)).catch(P=>C(P))}),m=()=>{n.value=null,r.value=null,o=[],s="Hadir"},v=x=>{c.value||(x.preventDefault(),c.value=!0,Promise.allSettled([h(),A()]).then(C=>{C[1].status=="fulfilled"?(c.value=!1,a.value=!0,l.value=!0,u.value=!0,m()):(c.value=!0,a.value=!1,l.value=!0)}))},A=async()=>{const x="https://script.google.com/macros/s/AKfycby1ovbqWQ5T5wkb8zGGA7oK8Qv3nMUtLz1us1SwIAF7H0H0NwQtaoB7N3RptNZElaqP/exec",C=new FormData(e.value);C.append("Dieta",o.value.join(", ")),await fetch(x,{method:"POST",body:C})};return(x,C)=>(E(),k("section",zy,[f("section",Ky,[y(yt,{title:"Buku Tamu",subtitle:"Demi kelancaran acara dimohon untuk para tamu undangan untuk memastikan kehadirannya pada acara kami"}),y(Nd,{statusResponse:a.value,showAlert:l.value,onClose:C[0]||(C[0]=I=>l.value=!1)},null,8,["statusResponse","showAlert"]),f("div",Gy,[u.value?(E(),k("button",{key:0,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:C[1]||(C[1]=I=>u.value=!1)},"Enviar otro")):De("",!0)]),u.value?De("",!0):(E(),k("form",{key:0,ref_key:"form",ref:e,onSubmit:v,class:"w-10/12 mx-auto mt-6"},[f("div",Wy,[Xy,ge(f("input",{class:"w-full","onUpdate:modelValue":C[2]||(C[2]=I=>n.value=I),placeholder:"Nama Lengkap Anda",name:"Nama",id:"Nama",type:"text",required:""},null,512),[[Nt,n.value]])]),ge(f("input",{type:"hidden",id:"Fecha",name:"Fecha","onUpdate:modelValue":C[3]||(C[3]=I=>i.value=I)},null,512),[[Nt,i.value]]),f("div",Qy,[Yy,ge(f("select",{class:"w-full","onUpdate:modelValue":C[4]||(C[4]=I=>tu(s)?s.value=I:s=I),name:"Kehadiran",id:"Kehadiran",required:""},ev,512),[[eu,Ft(s)]])]),f("div",tv,[nv,ge(f("textarea",{class:"w-full",placeholder:"Tuliskan pesan anda disini","onUpdate:modelValue":C[5]||(C[5]=I=>r.value=I),name:"Pesan",id:"Pesan",cols:"30",rows:"5"},null,512),[[Nt,r.value]])]),f("button",{disabled:c.value,"data-aos":"zoom-in",class:"w-full bg-gray-800 text-gray-100 mt-6 rounded-lg py-2 font-medium pointer active:scale-90 border-gray-500 duration-300",type:"submit"},[c.value?(E(),k("i",iv)):(E(),k("i",sv)),ov],8,rv)],544)),av])]))}};var uv=tn(lv,[["__scopeId","data-v-3bd25f46"]]);const cv=mt(" Scroll to the top "),fv={setup(t){const e=n=>{document.querySelector(n).scrollIntoView({behavior:"smooth"})};return(n,r)=>(E(),k("section",null,[y(Eu,{id:"mainCover"}),y(lu,{onClick:r[0]||(r[0]=()=>e("#main-cover"))},{default:st(()=>[cv]),_:1}),y(Mu),y(jh),y(Bh,{onGoToGuestBook:r[1]||(r[1]=s=>e("#guest-book"))}),y(Yh),y(bd),y(_d,{id:"envelope"}),y(uv,{id:"guest-book"})]))}};export{fv as default};
